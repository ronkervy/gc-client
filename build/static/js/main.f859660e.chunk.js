(this["webpackJsonpgc-client"]=this["webpackJsonpgc-client"]||[]).push([[0],{231:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(17),c=n.n(r),i=n(86),o=n(16),s=n(277),l=n(6),u=n(20),d=n(18),p=n(15),j=n(272),b=n(107),f=n(273),h=n(274),x=n(266),O=n(267),m=n(275),g=n(237),y=n(295),v=n(12),_=n(264),C={ProgressWrap:{top:0,left:0,display:"flex",position:"fixed",justifyContent:"center",alignItems:"center",zIndex:100,backgroundColor:"rgba(0, 0, 0, 0.9)",height:"730px",width:"100%",transition:"all 300ms linear",borderRadius:"20px"},HeaderWrap:{height:"60px",padding:"20px 0px",borderRadius:"10px",WebkitAppRegion:"drag"}},S=n(2);var k,w=Object(l.a)(C)((function(e){var t=e.classes;return Object(S.jsx)("div",{className:t.ProgressWrap,children:Object(S.jsx)(_.a,{size:70})})})),P=n(11),T=Object(P.e)({name:"notifications",initialState:{open:!1,message:"",severity:""},reducers:{OpenNotification:function(e,t){var n=t.payload;e.open=!0,e.severity=n.severity,e.message=n.message},CloseNotification:function(e,t){t.payload;e.open=!1,e.severity="",e.message=""}}}),R=T.actions,I=R.OpenNotification,A=R.CloseNotification,W=T.reducer,z=n(9),D=n.n(z),E=n(23),N=n(53),B=n.n(N);window.require("electron").ipcRenderer.on("get-ip",(function(e,t){var n=t.address?t.address:"localhost";k=B.a.create({baseURL:"http://".concat(n,":8081/api/v1"),timeout:1e3})}));var q=function(e){return new Promise((function(t){return setTimeout(t,e)}))},H=Object(P.b)("cart/CreateTransaction",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,r=t.values,e.next=5,k({url:"/transactions",method:"POST",data:r});case 5:return c=e.sent,e.next=8,q(2e3);case 8:return e.abrupt("return",c.data);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(P.d)({selectId:function(e){return e._id}}),M=Object(P.e)({name:"cart",initialState:L.getInitialState({cart:[],loading:!1,error:""}),reducers:{addItem:function(e,t){var n=t.payload,a=e.cart.findIndex((function(e){return e._id===n._id})),r=n._id,c=n.item_name,i=n.item_price,o=n.item_qty;-1!==a?(e.cart[a].qty=parseInt(e.cart[a].qty)+1,e.cart[a].total_per_unit=parseInt(e.cart[a].qty)*i):e.cart.unshift({_id:r,item_name:c,item_price:i,inventory_qty:o,error:!1,qty:1,discount:0,total_per_unit:1*i})},updateQty:function(e,t){var n=t.payload,a=n._id,r=n.qty,c=n.item_price,i=n.inventory_qty,o=e.cart.findIndex((function(e){return e._id===a})),s=NaN===r?0:parseInt(r);-1!==o&&(e.cart[o].qty=s,e.cart[o].total_per_unit=s*c,e.cart[o].error=s>i)},setDiscount:function(e,t){var n=t.payload,a=n._id,r=n.discount,c=n.item_price,i=n.qty,o=e.cart.findIndex((function(e){return e._id===a})),s=r/100,l=c*i;-1!==o&&(e.cart[o].discount=s,e.cart[o].total_per_unit=0!==r?l-l*s:c*i)},removeItem:function(e,t){var n=t.payload,a=e.cart.findIndex((function(e){return e._id===n}));e.cart.splice(a,1)}},extraReducers:function(e){e.addCase(H.pending,(function(e){e.loading=!0})).addCase(H.fulfilled,(function(e,t){t.payload;e.loading=!1,e.cart=[]})).addCase(H.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.error=n}))}}),U=function(e){return e.cart},V=Object(P.c)(U,(function(e){return e.cart})),F=Object(P.c)(U,(function(e){return e.loading})),G=M.actions,Q=G.addItem,K=G.removeItem,J=G.updateQty,Y=G.setDiscount,X=M.reducer,Z=n(10),$=n(294),ee=n(271),te=n(31),ne=n(289);var ae=function(e){var t=e.item,n=Object(v.b)(),r=Object(a.useState)(parseInt(t.item_price)*parseInt(t.qty)),c=Object(u.a)(r,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){o(parseInt(t.item_price)*parseInt(t.qty))}),[t.qty]),Object(a.useEffect)((function(){o(t.total_per_unit)}),[t.total_per_unit]),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(x.a,{component:ne.a.tr,initial:{y:-100,opacity:0},animate:{y:0,opacity:1},children:[Object(S.jsxs)(O.a,{style:{fontSize:"10px"},children:[Object(S.jsx)(p.a,{color:"grey",icon:d.b}),"\xa0\xa0",t.item_name]}),Object(S.jsx)(O.a,{children:Object(S.jsx)($.a,{error:t.error,variant:"outlined",size:"small",value:t.qty,onChange:function(e){var a=""==e.target.value?0:parseInt(e.target.value);n(J(Object(Z.a)(Object(Z.a)({},t),{},{qty:a})))},inputProps:{style:{textAlign:"center",fontSize:"10px"}},style:{WebkitAppRegion:"no-drag"}})}),Object(S.jsx)(O.a,{children:Object(S.jsx)(te.a,{thousandSeparator:!0,displayType:"text",value:i,style:{fontSize:"10px"},decimalScale:2,decimalSeparator:".",fixedDecimalScale:!0})}),Object(S.jsx)(O.a,{children:Object(S.jsx)($.a,{disabled:t.error,variant:"outlined",size:"small",value:100*t.discount,inputProps:{style:{textAlign:"center",fontSize:"10px",width:"50px"}},onChange:function(e){n(Y(Object(Z.a)(Object(Z.a)({},t),{},{discount:""===e.target.value?0:parseInt(e.target.value)})))},style:{WebkitAppRegion:"no-drag"}})}),Object(S.jsx)(O.a,{children:Object(S.jsx)(ee.a,{color:"secondary",onClick:function(){n(K(t._id))},style:{WebkitAppRegion:"no-drag"},children:Object(S.jsx)(p.a,{icon:d.p})})})]},t._id)})};var re,ce=function(e){var t=Object(v.b)(),n=Object(v.c)(V),r=Object(v.c)((function(e){return e.cart})).loading,c=Object(a.useState)([]),i=Object(u.a)(c,2),s=i[0],l=i[1],_=Object(a.useState)(0),C=Object(u.a)(_,2),k=C[0],P=C[1],T=Object(a.useState)(8),R=Object(u.a)(T,2),A=R[0],W=R[1],z=Object(o.f)();return Object(a.useEffect)((function(){l(n)}),[n]),r?Object(S.jsx)(w,{}):Object(S.jsx)(j.a,{component:b.a,elevation:2,style:{minHeight:"600px",position:"relative"},children:Object(S.jsxs)(f.a,{size:"small",stickyHeader:!0,children:[Object(S.jsx)(h.a,{children:Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Name"}),Object(S.jsx)(O.a,{style:{textAlign:"center"},children:"QTY"}),Object(S.jsx)(O.a,{children:"Total"}),Object(S.jsx)(O.a,{children:"Discount"}),Object(S.jsx)(O.a,{children:"Action"})]})}),Object(S.jsx)(m.a,{children:s.slice(k*A,k*A+A).map((function(e){return Object(S.jsx)(ae,{item:e})}))}),Object(S.jsxs)(x.a,{style:{position:"absolute",bottom:"0",left:"0"},children:[Object(S.jsx)(O.a,{colSpan:1,children:Object(S.jsx)(g.a,{variant:"contained",size:"small",style:{backgroundColor:"green",color:"#ffffff",WebkitAppRegion:"no-drag"},startIcon:Object(S.jsx)(p.a,{icon:d.n}),onClick:function(){if(0==s.length)return t(I({message:"Cart is Empty",severity:"error"}));var e=[];if(s.map((function(t){!0===t.error&&e.push(t.error)})),e.length>0)return t(I({message:"Invalid Quantity",severity:"error"}));z.push("/transaction",n)},children:"Checkout"})}),Object(S.jsx)(O.a,{colSpan:4,children:Object(S.jsx)(y.a,{rowsPerPageOptions:[8,16,800],count:s.length,rowsPerPage:A,page:k,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){W(+e.target.value),P(0)},labelRowsPerPage:!1})})]})]})})};window.require("electron").ipcRenderer.on("get-ip",(function(e,t){var n=t.address?t.address:"localhost";re=B.a.create({baseURL:"http://".concat(n,":8081/api/v1"),timeout:1e3})}));var ie=function(e){return new Promise((function(t){return setTimeout(t,e)}))},oe=Object(P.b)("products/selectAllProducts",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,r=t.opt,e.prev=2,e.next=5,re(Object(Z.a)(Object(Z.a)({},r),{},{method:"GET"}));case 5:return c=e.sent,e.next=8,ie(2e3);case 8:return e.abrupt("return",c.data);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",a(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),se=Object(P.b)("products/searchProduct",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,r=t.opt,t.value,e.next=5,re(Object(Z.a)(Object(Z.a)({},r),{},{method:"GET"}));case 5:return c=e.sent,e.next=8,ie(2e3);case 8:return e.abrupt("return",c.data);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),le=Object(P.b)("products/selectSingleProduct",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,re({method:"GET",url:"/products/"+t});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),ue=(Object(P.b)("products/createTransaction",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,re({method:"POST",url:"/products",data:t});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(P.d)({selectId:function(e){return e._id},sortComparer:function(e){return e.createdAt}})),de=Object(P.e)({name:"products",initialState:ue.getInitialState({loading:!0,selectedProd:[],error:null}),reducers:{},extraReducers:function(e){e.addCase(oe.pending,(function(e){e.loading=!0})).addCase(oe.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,ue.setAll(e,n)})).addCase(oe.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.error=n})).addCase(se.pending,(function(e){e.loading=!0})).addCase(se.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,ue.setAll(e,n)})).addCase(se.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.error=n})).addCase(le.pending,(function(e,t){t.payload;e.loading=!0})).addCase(le.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,ue.addOne(e,n)})).addCase(le.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.error=n}))}}),pe=Object(P.c)((function(e){return e.products}),(function(e){return e.loading})),je=ue.getSelectors((function(e){return e.products})),be=de.reducer;var fe=function(e){var t=e.item,n=Object(v.b)();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(x.a,{hover:!0,style:{cursor:"pointer"},children:[Object(S.jsxs)(O.a,{style:{fontSize:"10px"},children:[Object(S.jsx)(p.a,{color:"grey",icon:d.a}),"\xa0\xa0",t.item_name]}),Object(S.jsx)(O.a,{style:{fontSize:"10px"},children:t.item_qty}),Object(S.jsx)(O.a,{style:{fontSize:"10px"},children:t.item_price}),Object(S.jsx)(O.a,{children:Object(S.jsx)(ee.a,{color:"primary",onClick:function(){n(Q(t))},style:{WebkitAppRegion:"no-drag"},children:Object(S.jsx)(p.a,{icon:d.k})})})]},t._id)})},he=n(66);var xe=function(){var e=Object(v.b)(),t=Object(v.c)(je.selectAll),n=Object(v.c)(pe),r=Object(a.useState)(0),c=Object(u.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)(8),l=Object(u.a)(s,2),d=l[0],p=l[1],g=window.require("electron").ipcRenderer;return Object(a.useEffect)((function(){g.on("get-ip",(function(n,a){var r=a.address?a.address:"localhost";Object(he.io)("http://".concat(r,":8081")).on("connect",(function(){0==t.length&&e(oe({opt:{url:"/products"}}))}))})),e(oe({opt:{url:"/products"}}))}),[]),n?Object(S.jsx)(w,{}):Object(S.jsx)("div",{children:Object(S.jsx)(j.a,{component:b.a,style:{minHeight:"600px",position:"relative"},children:Object(S.jsxs)(f.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table",children:[Object(S.jsx)(h.a,{children:Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Name"}),Object(S.jsx)(O.a,{children:"QTY"}),Object(S.jsx)(O.a,{children:"Price"}),Object(S.jsx)(O.a,{children:"Action"})]})}),Object(S.jsx)(m.a,{children:t.slice(i*d,i*d+d).map((function(e){return Object(S.jsx)(fe,{item:e})}))}),Object(S.jsx)(x.a,{style:{position:"absolute",bottom:"0",left:"0"},children:Object(S.jsx)(O.a,{colSpan:4,children:Object(S.jsx)(y.a,{rowsPerPageOptions:[8,16,800],count:t.length,rowsPerPage:d,page:i,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){p(+e.target.value),o(0)}})})})]})})})},Oe={Dashboard:{height:"90%"},infoBlock:{height:"50px",borderRadius:"10px",background:"#fff"},ContentBlock:{height:"90%",borderRadius:"10px",padding:"20px"}};var me=Object(l.a)(Oe)((function(e){var t=e.classes,n=t.ContentBlock,a=t.Dashboard;return t.infoBlock,Object(S.jsxs)(s.a,{container:!0,className:a,spacing:2,children:[Object(S.jsx)(s.a,{direction:"column",item:!0,container:!0,lg:6,sm:6,children:Object(S.jsx)(ce,{})}),Object(S.jsx)(s.a,{item:!0,lg:6,sm:6,className:n,children:Object(S.jsx)(xe,{})})]})})),ge={"@global":{body:{height:"100%",margin:"0px","& #root":{height:"100%"},overflow:"hidden",position:"relative",borderRadius:"15px"},html:{height:"95%",margin:"0px",padding:"20px"}},root:{height:"100%",background:"#EBEBF7",padding:"20px",borderRadius:"20px",position:"relative"},ContainerWrap:{height:"auto",padding:"20px 0px 0px 0px !important",position:"relative"}},ye=n(296),ve=n(293);var _e=function(e){var t=e.handleCloseToast,n=Object(v.c)((function(e){return e.notifications})),a=n.message,r=n.severity,c=n.open;return Object(S.jsx)(ye.a,{open:c,autoHideDuration:4e3,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{bottom:"50px",right:"50px",WebkitAppRegion:"no-drag"},children:Object(S.jsx)(ve.a,{elevation:6,variant:"filled",onClose:t,severity:r,children:a})})},Ce=n(278),Se=n(279),ke=n(280),we=n(276),Pe=n(282),Te=n(281),Re=Object(a.forwardRef)((function(e,t){return Object(S.jsx)(Ce.a,Object(Z.a)({direction:"up",ref:t},e))}));var Ie,Ae=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(o.f)();Object(a.useEffect)((function(){c(!0)}),[]);var l=function(){i.goBack(),c(!1)};return Object(S.jsxs)(Se.a,{open:r,onClose:l,TransitionComponent:Re,fullScreen:!0,children:[Object(S.jsx)(ke.a,{style:{WebkitAppRegion:"no-drag",backgroundColor:"white"},children:Object(S.jsx)(we.a,{children:Object(S.jsx)(ee.a,{edge:"start",color:"secondary",onClick:l,children:Object(S.jsx)(Te.a,{})})})}),Object(S.jsx)(Pe.a,{maxWidth:"lg sm",children:Object(S.jsx)(s.a,{container:!0,children:"TEST"})})]})},We=n(147),ze=n(239),De=n(145),Ee=n(238),Ne=n(283),Be=n(298),qe=n(284),He={TransactionModal:{display:"flex",alignItems:"center",justifyContent:"center",WebkitAppRegion:"no-drag"},ModalContent:{borderRadius:"10px",padding:"20px",width:"400px",height:"400px",backgroundColor:"#ffffff",outline:"none",position:"relative"},SuccessPageModal:{position:"relative",display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center",outline:"none",WebkitAppRegion:"no-drag"}};window.require("electron").ipcRenderer.on("get-ip",(function(e,t){var n=t.address?t.address:"localhost";Ie=B.a.create({baseURL:"http://".concat(n,":8081/api/v1/gc-print"),timeout:124e3})}));var Le=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Me=Object(P.b)("report/CreateTransactionReport",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,r=t.url,e.next=5,Ie({url:r,method:"GET"});case 5:return c=e.sent,e.next=8,Le(2e3);case 8:return e.next=10,c.data;case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()),Ue=n(70),Ve=n.n(Ue),Fe=n(95),Ge=n.n(Fe),Qe=n(142),Ke=function(e,t){console.log(e);var n="TEST DATE";return{pageSize:{width:684,height:396},pageMargins:[40,50,40,60],header:function(e){if(1===e)return{columns:[{image:"data:image/png;base64,".concat(t),width:40,height:40,margin:[20,3,0,0]},{stack:[{text:"Glorious Cocolumber \n",style:"header"},{text:"and Construction Supply",style:"subheader"}],margin:[20,12]},{text:"4024 Old National Highway\nBrgy. San Antonio Bi\xf1an, Laguna\nCalabarzon, Philippines",alignment:"right",margin:[0,12,20,12],fontSize:8}],margin:[20,8],width:"*"}},footer:function(e,t){if(e===t)return{columns:[{text:"\n_________________________ \n \n Prepared By",alignment:"left",fontSize:9},{text:"\n_________________________ \n \n Signiture over printed name",fontSize:9},{text:[{text:"Php. ".concat(parseFloat("TOTAL").toFixed(2),"\n"),alignment:"center"},"_________________________ \n \n",{text:"Total Amount Purchased",alignment:"center"}],alignment:"center",fontSize:9}],margin:[40,10,40,0],width:"*"}},content:[{stack:[{columns:[{text:["Customer Name : ",{text:"".concat("TEST"),color:"maroon",italics:!0}],bold:!0,fontSize:11,margin:[0,5,0,0]},{text:["Transaction Date : ",{text:"".concat("TEST DATE"),color:"maroon",italics:!0}],bold:!0,fontSize:11,alignment:"right",margin:[0,5,0,0]}]},{columns:[{text:["Payment Type : ",{text:"".concat(n),color:"maroon",italics:!0}],bold:!0,fontSize:11,margin:[0,5,0,10]}]},{layout:{hLineWidth:function(e,t){return 0===e||e===t.table.body.length?1:0},hLineHeight:function(e,t){return 1===e?0:1},paddingBottom:function(e,t,n){if(e===t.table.body.length-1){var a=t.positions[t.positions.length-1],r=a.pageInnerHeight-a.top;return r<0?2:r}return 2}},table:{dontBreakRows:!1,headerRows:1,widths:["*","*",40,50,"*","*"],body:[[{text:"Item Name",style:"tableHeader"},{text:"Supplier",style:"tableHeader"},{text:"Quantity",style:"tableHeader"},{text:"Price",style:"tableHeader"},{text:"Total Qty Price",style:"tableHeader"},{text:"Discount",style:"tableHeader"}]].concat(Object(Qe.a)(e))}}],margin:[0,20,0,0]}],styles:{header:{bold:!0},subheader:{fontSize:9},tableHeader:{fontSize:10,color:"white",fillColor:"grey",alignment:"center",margin:[0,6],border:[!0,!1,!0,!1]},tableItems:{alignment:"center",margin:[0,6],fontSize:9}},defaultStyle:{font:"Roboto",columnGap:5}}};var Je=Object(l.a)(He)((function(e){var t=Object(v.b)(),n=Object(v.c)(F),r=Object(o.g)().state,c=Object(a.useState)(!1),i=Object(u.a)(c,2),l=i[0],j=i[1],b=Object(o.f)(),f=e.classes,h=f.TransactionModal,x=f.ModalContent,O=Object(a.useState)(0),m=Object(u.a)(O,2),y=m[0],_=m[1],C=Object(a.useState)({customer_name:"",transact_payment_type:"full",cash_amount:0,transact_status:!0}),k=Object(u.a)(C,2),P=k[0],T=k[1],R=function(){var e=Object(E.a)(D.a.mark((function e(n){var a,r,c,i,o,s,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n.payload){e.next=8;break}return a=n.payload.transact_id,e.next=4,t(Me({url:"/transactions/"+a}));case 4:r=e.sent,Me.fulfilled.match(r)?(c=r.payload,i=c.doc,o=c.logo,(s=JSON.parse(i)).length>0?(Ve.a.vfs=Ge.a.pdfMake.vfs,l=Ke(s,o),Ve.a.createPdf(l).getBlob((function(e){var t=window.URL.createObjectURL(e);b.push("/transaction/success?pdf="+t+"&page=transaction")}))):t(I({message:"No Transaction has been made.",severity:"error"}))):t(I({message:"Transaction Failed, Pls try again.",severity:"error"})),e.next=9;break;case 8:b.goBack();case 9:j(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){j(!0),r.map((function(e){var t=e.total_per_unit;_((function(e){return e+t}))}))}),[]),n?Object(S.jsx)(w,{}):Object(S.jsx)(We.a,{open:l,onClose:R,BackdropComponent:ze.a,BackdropProps:{timeout:500,style:{borderRadius:"20px",height:"730px"}},className:h,children:Object(S.jsx)(De.a,{in:l,children:Object(S.jsx)("div",{className:x,children:Object(S.jsxs)(s.a,{container:!0,spacing:2,children:[Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,children:Object(S.jsxs)(Ee.a,{variant:"h6",children:["Total Number of Order :\xa0",Object(S.jsx)(te.a,{displayType:"text",value:r.length,customInput:$.a,fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.e})})}})]})}),Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,children:Object(S.jsxs)(Ee.a,{variant:"h6",children:["Total Price :\xa0",Object(S.jsx)(te.a,{displayType:"text",value:y,customInput:$.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,decimalSeparator:".",prefix:"Php ",fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.e})})}})]})}),Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,children:Object(S.jsxs)(Ee.a,{variant:"h6",children:["Cash Change :\xa0",Object(S.jsx)(te.a,{displayType:"text",value:0==P.cash_amount?0:P.cash_amount-y,customInput:$.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,decimalSeparator:".",fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.e})})}})]})}),Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,children:Object(S.jsx)($.a,{fullWidth:!0,variant:"outlined",value:P.customer_name,onChange:function(e){T((function(t){return Object(Z.a)(Object(Z.a)({},t),{},{customer_name:e.target.value})}))},label:"Customer Name",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.q})})}})}),Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,children:Object(S.jsx)(te.a,{error:"full"==P.transact_payment_type&&P.cash_amount<y||0==P.cash_amount&&"partial"==P.transact_payment_type,label:"Cash Amount",fullWidth:!0,variant:"outlined",customInput:$.a,value:P.cash_amount,decimalScale:2,decimalSeparator:".",fixedDecimalScale:!0,InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.h})})},onChange:function(e){var t=e.target.value;T((function(e){return Object(Z.a)(Object(Z.a)({},e),{},{cash_amount:t})}))}})}),Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,children:Object(S.jsxs)($.a,{fullWidth:!0,variant:"outlined",select:!0,label:"Payment Type",value:P.transaction_payment_type,onChange:function(e){var t=e.target.value;T((function(e){return Object(Z.a)(Object(Z.a)({},e),{},{transact_payment_type:t})}))},children:[Object(S.jsx)(Be.a,{value:"full",children:"Full Payment"}),Object(S.jsx)(Be.a,{value:"partial",children:"Partial Payment"})]})}),Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,style:{position:"absolute",bottom:"0",left:"0"},children:Object(S.jsxs)(qe.a,{variant:"outlined",color:"primary","aria-label":"contained primary button group",children:[Object(S.jsx)(g.a,{fullWidth:!0,startIcon:Object(S.jsx)(p.a,{color:"green",icon:d.i}),onClick:Object(E.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=P.customer_name){e.next=2;break}return e.abrupt("return");case 2:if(0!==P.cash_amount){e.next=4;break}return e.abrupt("return");case 4:if(!("full"==P.transact_payment_type&&P.cash_amount<y)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t(H({values:r.map((function(e){return Object(Z.a)(Object(Z.a)({},e),{},{customer_name:P.customer_name,total_amount:y,cash_amount:P.cash_amount,change_amount:P.cash_amount-y,transact_payment_type:P.transact_payment_type,transact_status:"full"===P.transact_payment_type})}))}));case 8:n=e.sent,H.fulfilled.match(n)?R(n):H.rejected.match(n)&&t(I({message:"Error : "+n.payload,severity:"error"}));case 10:case"end":return e.stop()}}),e)}))),children:"Process Order"}),Object(S.jsx)(g.a,{onClick:R,children:"Cancel"})]})})]})})})})})),Ye=n(291),Xe=n(285),Ze=n(286),$e=Object(P.e)({name:"connection",initialState:{isConnected:!1},reducers:{setConnection:function(e,t){var n=t.payload;e.isConnected=n}}}),et=$e.actions.setConnection,tt=$e.reducer;var nt,at=Object(l.a)(C)((function(e){var t=window.require("electron").ipcRenderer,n=e.searchRef,r=e.classes.HeaderWrap,c=Object(v.b)(),i=Object(v.c)((function(e){return e.connection})).isConnected,l=Object(o.f)();return Object(a.useEffect)((function(){t.on("get-ip",(function(e,t){console.log(t);var n=t.address?t.address:"localhost",a=Object(he.io)("http://".concat(n,":8081"));a.on("connect",(function(){c(et(a.connected))})),a.on("disconnect",(function(){c(et(a.connected))}))}))}),[]),Object(S.jsxs)(s.a,{item:!0,container:!0,lg:12,sm:12,className:r,component:b.a,elevation:2,style:{display:"flex !important",flexDirection:"row",justifyContent:"space-between"},children:[Object(S.jsxs)(Ye.a,{style:{WebkitAppRegion:"no-drag",height:"40px",alignSelf:"center",display:"flex"},children:[Object(S.jsx)($.a,{size:"small",margin:"none",variant:"outlined",label:"Search Product",inputRef:n,InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.m})})},onKeyPress:function(e){"Enter"===e.key&&c(se({opt:{url:"/products/search/"+e.target.value}}))}}),Object(S.jsx)(Xe.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(S.jsx)(Ye.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center"},children:Object(S.jsx)(ee.a,{size:"small",onClick:function(){c(oe({opt:{url:"/products"}}))},children:Object(S.jsx)(p.a,{color:"blue",icon:d.o})})}),Object(S.jsx)(Xe.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(S.jsx)(Ye.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center",justifySelf:"flex-end"},children:Object(S.jsx)(g.a,{variant:"outlined",startIcon:Object(S.jsx)(p.a,{color:"green",icon:d.g}),size:"small",onClick:function(){l.push("/translist")},children:"Transactions"})}),Object(S.jsx)(Xe.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(S.jsxs)(Ye.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center",justifySelf:"flex-end"},children:[Object(S.jsx)(p.a,{icon:d.d,color:i?"green":"red"}),Object(S.jsxs)(Ee.a,{variant:"caption",children:["\xa0",i?"Connected to Server":"Disconnected"]})]})]}),Object(S.jsxs)(Ye.a,{style:{WebkitAppRegion:"no-drag",alignSelf:"center"},children:[Object(S.jsx)(ee.a,{size:"small",component:ne.a.div,whileHover:{scale:1.1},onClick:function(){t.invoke("min")},children:Object(S.jsx)(Ze.a,{color:"primary"})}),Object(S.jsx)(ee.a,{size:"small",component:ne.a.div,whileHover:{scale:1.1},onClick:function(){t.invoke("close")},children:Object(S.jsx)(Te.a,{color:"secondary"})}),"\xa0\xa0"]})]})})),rt=n(287),ct=n(26),it=n(290),ot=n(141);window.require("electron").ipcRenderer.on("get-ip",(function(e,t){var n=t.address?t.address:"localhost";nt=B.a.create({baseURL:"http://".concat(n,":8081/api/v1"),timeout:12e4})}));var st=function(e){return new Promise((function(t){return setTimeout(t,e)}))},lt=Object(P.b)("transactions/getAllTransaction",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,r=t.opt,e.prev=2,e.next=5,nt(Object(Z.a)(Object(Z.a)({},r),{},{method:"GET"}));case 5:return c=e.sent,e.next=8,st(2e3);case 8:return e.abrupt("return",c.data);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",a(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),ut=(Object(P.b)("transactions/getSingleTransaction",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,r=t.opt,e.prev=2,e.next=5,nt(Object(Z.a)(Object(Z.a)({},r),{},{method:"GET"}));case 5:return c=e.sent,e.next=8,st(2e3);case 8:return e.abrupt("return",c.data);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",a(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(P.b)("transactions/createTransaction",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,r=t.opt,c=t.values,e.prev=2,e.next=5,nt(Object(Z.a)(Object(Z.a)({},r),{},{method:"POST",data:c}));case 5:return i=e.sent,e.next=8,st(2e3);case 8:return e.abrupt("return",i.data);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",a(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}())),dt=Object(P.b)("transactions/findTransaction",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,r=t.opt,e.next=5,nt(Object(Z.a)(Object(Z.a)({},r),{},{method:"GET"}));case 5:return c=e.sent,e.next=8,st(2e3);case 8:return e.abrupt("return",c.data);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),pt=Object(P.b)("transactions/getDocDef",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,r=t.opt,e.next=5,nt(Object(Z.a)(Object(Z.a)({},r),{},{method:"GET",responseType:"blob",headers:{Accept:"application/pdf","Content-Type":"application/pdf",mode:"no-cors"}}));case 5:return c=e.sent,i=window.URL.createObjectURL(c.data),e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),jt=Object(P.b)("transactions/updateTransaction",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,r=t.opt,c=t.value,e.next=5,nt(Object(Z.a)(Object(Z.a)({},r),{},{method:"PATCH",data:c}));case 5:return i=e.sent,e.next=8,st(2e3);case 8:return e.abrupt("return",i.data);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),bt=Object(P.b)("transactions/deleteTransaction",function(){var e=Object(E.a)(D.a.mark((function e(t,n){var a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,r=t.opt,e.next=5,nt(Object(Z.a)(Object(Z.a)({},r),{},{method:"DELETE"}));case 5:return c=e.sent,e.next=8,st(2e3);case 8:return e.abrupt("return",c.data);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),ft=Object(rt.a)((function(e){return{Modal:{display:"flex",alignItems:"center",justifyContent:"center"},ModalContent:{width:"450px",height:"auto",borderRadius:"5px",background:"#ffffff",outline:"none",padding:"25px"}}})),ht=function(e){var t=e.data,n=e.fn,r=Object(v.b)(),c=Object(v.c)((function(e){return e.report})).loading,i=Object(a.useState)({partial_payments:0}),l=Object(u.a)(i,2),j=l[0],b=l[1],f=Object(o.f)();return c?Object(S.jsx)(w,{}):Object(S.jsxs)(s.a,{item:!0,container:!0,lg:12,sm:12,spacing:2,children:["partial"===t.payment_type?Object(S.jsx)(s.a,{item:!0,lg:6,sm:6,children:Object(S.jsx)(te.a,{customInput:$.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,size:"small",fullWidth:!0,label:"Amount",margin:"dense",variant:"outlined",onChange:function(e){b((function(t){return Object(Z.a)(Object(Z.a)({},t),{},{partial_payments:parseInt(e.target.value)})}))},InputProps:{style:{color:"partial"==t.payment_type?"maroon":"green"},startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.j})})}})}):Object(S.jsx)("div",{}),Object(S.jsx)(s.a,{item:!0,lg:6,sm:6,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(S.jsxs)(qe.a,{variant:"contained",children:["partial"===t.payment_type?Object(S.jsx)(g.a,{size:"small",color:"secondary",style:{background:"green"},onClick:Object(E.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(jt({opt:{url:"/transactions/"+t._id},value:j}));case 2:n=e.sent,jt.fulfilled.match(n)?r(I({message:"Transaction Updated",severity:"success"})):r(I({message:"Transaction Update Failed",severity:"error"}));case 4:case"end":return e.stop()}}),e)}))),startIcon:Object(S.jsx)(p.a,{icon:Object(S.jsx)(Te.a,{})}),children:"Pay"}):Object(S.jsx)(g.a,{size:"small",disabled:!0,children:"Paid"}),Object(S.jsx)(g.a,{size:"small",color:"primary",onClick:Object(E.a)(D.a.mark((function e(){var n,a,c,i,o,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(Me({url:"/transactions/"+t._id}));case 2:n=e.sent,Me.fulfilled.match(n)?(a=n.payload,c=a.doc,i=a.logo,o=JSON.parse(c),console.log("PDF : ",o),o.length>0&&(Ve.a.vfs=Ge.a.pdfMake.vfs,s=Ke(o,i),Ve.a.createPdf(s).getBlob((function(e){console.log(e);var t=window.URL.createObjectURL(e);f.push("/transaction/success?pdf="+t)})))):r(I({message:"Cannot Print Transaction, please try again.",severity:"error"}));case 4:case"end":return e.stop()}}),e)}))),startIcon:Object(S.jsx)(p.a,{icon:d.l}),children:"Print"}),Object(S.jsx)(g.a,{size:"small",color:"secondary",onClick:n,startIcon:Object(S.jsx)(p.a,{icon:Object(S.jsx)(Te.a,{})}),children:"Cancel"})]})})]})};var xt=function(e){var t=e.inOpen,n=e.onClose,a=e.data,r=Object(v.c)((function(e){return e.transactions})).loading,c=ft();return r?Object(S.jsx)(w,{}):Object(S.jsx)(We.a,{open:t,onClose:n,BackdropComponent:ze.a,BackdropProps:{timeout:500},className:c.Modal,children:Object(S.jsx)(De.a,{in:t,children:Object(S.jsx)("div",{className:c.ModalContent,children:Object(S.jsxs)(s.a,{container:!0,spacing:2,children:[Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,children:Object(S.jsx)($.a,{size:"small",fullWidth:!0,disabled:!0,label:"Transaction ID",value:a._id,variant:"outlined",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.f})})}})}),Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,children:Object(S.jsx)($.a,{size:"small",fullWidth:!0,disabled:!0,label:"Customer",value:a.customer_name,variant:"outlined",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.q})})}})}),Object(S.jsx)(s.a,{item:!0,lg:4,sm:4,children:Object(S.jsx)($.a,{size:"small",fullWidth:!0,label:"Item in cart",value:a.cart_count,variant:"outlined",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.b})})}})}),Object(S.jsx)(s.a,{item:!0,lg:8,sm:8,children:Object(S.jsx)($.a,{size:"small",disabled:"full"===a.payment_type,fullWidth:!0,label:"Transaction Date",value:new Date(a.transaction_date).toISOString().split("T")[0],variant:"outlined",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.c})})}})}),Object(S.jsx)(s.a,{item:!0,lg:5,sm:5,children:Object(S.jsx)($.a,{size:"small",fullWidth:!0,label:"Payment Type",value:a.payment_type,variant:"outlined",InputProps:{style:{color:"partial"==a.payment_type?"maroon":"green"},startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.j})})}})}),Object(S.jsx)(s.a,{item:!0,lg:7,sm:7,children:Object(S.jsx)(te.a,{customInput:$.a,fixedDecimalScale:!0,disabled:"full"===a.payment_type,decimalScale:2,thousandSeparator:!0,allowNegative:!1,prefix:"Php ",size:"small",fullWidth:!0,label:"partial"==a.payment_type?"Remaining Balance":"Change Amount",value:a.change_amount,variant:"outlined",InputProps:{style:{color:"partial"==a.payment_type?"maroon":"green"},startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.j})})}})}),Object(S.jsx)(ht,{fn:n,data:a})]})})})})};var Ot=function(e){var t=e.transaction,n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],i=r[1];return Object(S.jsxs)(x.a,{hover:!0,onDoubleClick:function(){i(!0)},style:{background:"partial"==t.payment_type?"#fafafa":"",cursor:"pointer",userSelect:"none"},children:[Object(S.jsx)(O.a,{children:t.customer_name}),Object(S.jsx)(O.a,{style:{textAlign:"center"},children:t.cart_count}),Object(S.jsx)(O.a,{style:{textAlign:"center"},children:t.transaction_date.split("T")[0]}),Object(S.jsx)(O.a,{style:{textAlign:"center"},children:t.payment_type}),Object(S.jsx)(O.a,{style:{textAlign:"center"},children:Object(S.jsx)(te.a,{displayType:"text",value:t.cash_amount,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,prefix:"Php "})}),Object(S.jsx)(O.a,{style:{textAlign:"center"},children:Object(S.jsx)(te.a,{displayType:"text",value:t.total_price,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,prefix:"Php "})}),Object(S.jsx)(O.a,{style:{textAlign:"center"},children:Object(S.jsx)(te.a,{displayType:"text",value:t.change_amount,allowNegative:!1,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,prefix:"Php "})}),Object(S.jsx)(xt,{data:t,inOpen:c,onClose:function(){i(!1)}})]},t._id)},mt=Object(rt.a)((function(e){return{appBar:{position:"relative",background:"#ffffff"}}})),gt=Object(a.forwardRef)((function(e,t){return Object(S.jsx)(Ce.a,Object(Z.a)({direction:"up",ref:t},e))}));var yt=function(e){var t=mt(),n=Object(o.f)(),r=Object(v.b)(),c=Object(v.c)((function(e){return e.transactions})).entities,i=Object(v.c)((function(e){return e.transactions})).loading,l=Object(a.useState)(!1),g=Object(u.a)(l,2),_=g[0],C=g[1],k=Object(a.useState)(0),P=Object(u.a)(k,2),T=P[0],R=P[1],I=Object(a.useState)(8),A=Object(u.a)(I,2),W=A[0],z=A[1],D=Object(a.useState)(""),E=Object(u.a)(D,2),N=E[0],B=E[1],q=function(){C(!1),n.goBack()};Object(a.useEffect)((function(){C(!0),r(lt({opt:{url:"/transactions"}}))}),[]);var H=Object(a.useState)(new Date(Date.now()).toLocaleDateString()),L=Object(u.a)(H,2),M=L[0],U=L[1];return i?Object(S.jsx)(w,{}):Object(S.jsx)(ct.a,{utils:ot.a,children:Object(S.jsxs)(Se.a,{fullScreen:!0,open:_,onClose:q,TransitionComponent:gt,BackdropProps:{style:{height:"730px",borderRadius:"15px"}},style:{WebkitAppRegion:"no-drag",padding:"20px",height:"690px",borderRadius:"10px"},children:[Object(S.jsx)(ke.a,{className:t.appBar,children:Object(S.jsxs)(we.a,{style:{justifyContent:"space-between"},children:[Object(S.jsx)($.a,{size:"small",variant:"outlined",label:"Search",InputProps:{startAdornment:Object(S.jsx)(Ne.a,{position:"start",children:Object(S.jsx)(p.a,{icon:d.m})})},style:{flexBasis:"220px",flex:2,marginRight:"10px"},onKeyDown:function(e){B(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&r(dt({opt:{url:"/search/transactions?s=".concat(N)}}))}}),Object(S.jsx)(it.a,{disableToolbar:!0,variant:"inline",format:"yyyy-dd-MM",size:"small",margin:"dense",id:"date-picker-inline",label:"Filter Date",value:M,onChange:function(e){U(new Date(e));var t=new Date(e);r(dt({opt:{url:"/search/transactions?date=".concat(t)}}))},KeyboardButtonProps:{"aria-label":"change date"},style:{alignSelf:"flex-start",flex:1}}),Object(S.jsx)(ee.a,{focusRipple:!1,style:{margin:"0px 8px"},size:"small",onClick:q,children:Object(S.jsx)(Te.a,{color:"secondary"})})]})}),Object(S.jsx)(s.a,{container:!0,children:Object(S.jsx)(s.a,{item:!0,lg:12,sm:12,style:{padding:"30px"},children:Object(S.jsx)(j.a,{component:b.a,elevation:2,children:Object(S.jsxs)(f.a,{stickyHeader:!0,size:"medium",children:[Object(S.jsx)(h.a,{children:Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{style:{fontWeight:600},children:"Customer Name"}),Object(S.jsx)(O.a,{style:{fontWeight:600,textAlign:"center"},children:"In cart"}),Object(S.jsx)(O.a,{style:{fontWeight:600,textAlign:"center"},children:"Transaction date"}),Object(S.jsx)(O.a,{style:{fontWeight:600,textAlign:"center"},children:"Payment Type"}),Object(S.jsx)(O.a,{style:{fontWeight:600,textAlign:"center"},children:"Cash Amount"}),Object(S.jsx)(O.a,{style:{fontWeight:600,textAlign:"center"},children:"Total"}),Object(S.jsx)(O.a,{style:{fontWeight:600,textAlign:"center"},children:"Change"})]})}),Object(S.jsx)(m.a,{children:c.slice(T*W,T*W+W).map((function(e){return Object(S.jsx)(Ot,{transaction:e})}))}),Object(S.jsx)(y.a,{rowsPerPageOptions:[8,16,800],count:c.length,rowsPerPage:W,page:T,onChangePage:function(e,t){R(t)},onChangeRowsPerPage:function(e){z(+e.target.value),R(0)},labelRowsPerPage:!1})]})})})})]})})},vt=n(288),_t=n(233);var Ct=Object(_t.a)(He)((function(e){var t=Object(o.f)(),n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(v.c)((function(e){return e.transactions})).loading,l=Object(v.c)((function(e){return e.report})).loading,d=new URLSearchParams(Object(o.g)().search),p=d.get("pdf"),j=d.get("page"),b=e.classes,f=function(){"transaction"===j?t.goBack():t.push("/"),i(!1)};return Object(a.useEffect)((function(){i(!0)}),[]),s||l?Object(S.jsx)(w,{}):Object(S.jsx)(We.a,{open:c,onClose:f,BackdropComponent:ze.a,BackdropProps:{timeout:500},children:Object(S.jsx)(De.a,{in:c,children:Object(S.jsxs)("div",{className:b.SuccessPageModal,children:[Object(S.jsx)(vt.a,{size:"small",variant:"round",onClick:f,style:{position:"absolute",left:15,top:8,WebkitAppRegion:"no-drag"},children:Object(S.jsx)(Te.a,{})}),Object(S.jsx)("iframe",{style:{border:"none",WebkitAppRegion:"no-drag"},onClick:f,src:p+"#toolbar=1",width:"100%",height:"100%"})]})})})}));var St=Object(l.a)(ge)((function(e){var t=Object(v.b)(),n=e.classes,r=n.root,c=n.ContainerWrap,l=window.require("electron").ipcRenderer,u=Object(a.useRef)(null),d=function(){u.current.focus()};return Object(a.useEffect)((function(){return l.on("get-ip",(function(e,t){var n=t.address?t.address:"localhost";Object(he.io)("http://".concat(n,":8081")).emit("client",{name:"client"})})),document.addEventListener("keydown",(function(e){e.ctrlKey&&"f"==e.key&&d()})),function(){document.removeEventListener("keydown",(function(e){e.ctrlKey&&"f"==e.key&&d()}))}}),[]),Object(S.jsx)(i.a,{children:Object(S.jsxs)(s.a,{style:{WebkitAppRegion:"drag"},container:!0,dicrection:"column",className:r,spacing:3,children:[Object(S.jsx)(at,{searchRef:u}),Object(S.jsxs)(s.a,{item:!0,lg:12,sm:12,className:c,children:[Object(S.jsxs)(o.c,{children:[Object(S.jsx)(o.a,{exact:!0,path:"/",children:Object(S.jsx)(me,{})}),Object(S.jsx)(o.a,{exact:!0,path:"/products",children:Object(S.jsx)(xe,{})}),Object(S.jsx)(o.a,{exact:!0,path:"/print",children:Object(S.jsx)(Ae,{})}),Object(S.jsx)(o.a,{exact:!0,path:"/transaction",children:Object(S.jsx)(Je,{})}),Object(S.jsx)(o.a,{exact:!0,path:"/transaction/success",children:Object(S.jsx)(Ct,{})}),Object(S.jsx)(o.a,{exact:!0,path:"/translist",children:Object(S.jsx)(yt,{})})]}),Object(S.jsx)(_e,{handleCloseToast:function(){t(A())}})]})]})})})),kt=Object(P.e)({name:"transactions",initialState:{entities:[],pdf:[],loading:!1,errors:null},reducers:{},extraReducers:function(e){e.addCase(lt.pending,(function(e){e.loading=!0})).addCase(lt.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.entities=n})).addCase(lt.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.errors=n})).addCase(dt.pending,(function(e){e.loading=!0})).addCase(dt.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.entities=n})).addCase(dt.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.errors=n})).addCase(pt.pending,(function(e){e.loading=!0})).addCase(pt.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.pdf=n})).addCase(pt.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.errors=n})).addCase(ut.pending,(function(e){e.loading=!0})).addCase(ut.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.entities[n._id]=n})).addCase(ut.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.errors=n})).addCase(jt.pending,(function(e){e.loading=!0})).addCase(jt.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.entities=n})).addCase(jt.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.errors=n})).addCase(bt.pending,(function(e){e.loading=!0})).addCase(bt.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.entities=n})).addCase(bt.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.errors=n}))}}).reducer,wt=Object(P.e)({name:"report",initialState:{doc:"",loading:!1,error:""},reducers:{},extraReducers:function(e){e.addCase(Me.pending,(function(e){e.loading=!0})).addCase(Me.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.doc=n})).addCase(Me.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.error=n}))}}).reducer,Pt=Object(P.a)({reducer:{products:be,cart:X,notifications:W,transactions:kt,connection:tt,report:wt}});c.a.render(Object(S.jsx)(v.a,{store:Pt,children:Object(S.jsx)(St,{})}),document.getElementById("root"))}},[[231,1,2]]]);
//# sourceMappingURL=main.f859660e.chunk.js.map