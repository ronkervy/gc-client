(this["webpackJsonpgc-client"]=this["webpackJsonpgc-client"]||[]).push([[0],{231:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(19),c=a.n(r),i=a(54),s=a(20),o=a(277),l=a(6),d=a(17),u=a(14),p=a(13),j=a(272),b=a(107),f=a(273),h=a(274),x=a(266),m=a(267),O=a(275),g=a(237),v=a(297),y=a(9),_=a(264),C={ProgressWrap:{top:0,left:0,display:"flex",position:"fixed",justifyContent:"center",flexDirection:"column",alignItems:"center",zIndex:100,backgroundColor:"rgba(0, 0, 0, 0.9)",height:"730px",width:"100%",transition:"all 300ms linear",borderRadius:"20px"},HeaderWrap:{height:"60px",padding:"20px 0px",borderRadius:"10px",WebkitAppRegion:"drag"}},k=a(2);var S=Object(l.a)(C)((function(e){var t=e.classes,a=Object(n.useState)("Loading"),r=Object(d.a)(a,2),c=r[0];return r[1],Object(k.jsxs)("div",{className:t.ProgressWrap,children:[Object(k.jsx)(_.a,{size:70}),Object(k.jsx)("h4",{style:{textAlign:"center",color:"white",letterSpacing:"10px"},children:c})]})})),w=a(10),P=Object(w.e)({name:"notifications",initialState:{open:!1,message:"",severity:""},reducers:{OpenNotification:function(e,t){var a=t.payload;e.open=!0,e.severity=a.severity,e.message=a.message},CloseNotification:function(e,t){t.payload;e.open=!1,e.severity="",e.message=""}}}),R=P.actions,T=R.OpenNotification,I=R.CloseNotification,A=P.reducer,W=a(7),z=a.n(W),D=a(18),N=a(46),E=a.n(N),L=E.a.create({baseURL:"http://localhost:8082/api",timeout:124e3}),B=function(e){return new Promise((function(t){return setTimeout(t,e)}))},M=Object(w.b)("settings/SetIPAddress",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,r=t.url,c=t.data,e.next=5,L({url:r,method:"PATCH",data:c});case 5:return i=e.sent,e.next=8,B(2e3);case 8:return e.abrupt("return",i.data);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()),U=Object(w.b)("settings/GetSettings",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,r=t.url,e.next=5,L({url:r,method:"GET"});case 5:return c=e.sent,e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()),H=E.a.create({timeout:1e3}),q=function(e){return new Promise((function(t){return setTimeout(t,e)}))},F=Object(w.b)("cart/CreateTransaction",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=t.values,e.next=11,H({baseURL:"http://".concat(s,":8081/api/v1"),url:"/transactions",method:"POST",data:o});case 11:return l=e.sent,e.next=14,q(2e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),V=Object(w.d)({selectId:function(e){return e._id}}),G=Object(w.e)({name:"cart",initialState:V.getInitialState({cart:[],loading:!1,error:""}),reducers:{addItem:function(e,t){var a=t.payload,n=e.cart.findIndex((function(e){return e._id===a._id})),r=a._id,c=a.item_name,i=a.item_price,s=a.item_qty,o=a.item_unit;-1!==n?(e.cart[n].qty=parseInt(e.cart[n].qty)+1,e.cart[n].total_per_unit=parseInt(e.cart[n].qty)*i):e.cart.unshift({_id:r,item_name:c,item_price:i,inventory_qty:s,error:!1,qty:1,discount:0,total_per_unit:1*i,item_unit:o})},updateQty:function(e,t){var a=t.payload,n=a._id,r=a.qty,c=a.item_price,i=a.inventory_qty,s=e.cart.findIndex((function(e){return e._id===n})),o=NaN===r?0:parseInt(r);-1!==s&&(e.cart[s].qty=o,e.cart[s].total_per_unit=o*c,e.cart[s].error=o>i)},setDiscount:function(e,t){var a=t.payload,n=a._id,r=a.discount,c=a.item_price,i=a.qty,s=e.cart.findIndex((function(e){return e._id===n})),o=r/100,l=c*i;-1!==s&&(e.cart[s].discount=o,e.cart[s].total_per_unit=0!==r?l-l*o:c*i)},removeItem:function(e,t){var a=t.payload,n=e.cart.findIndex((function(e){return e._id===a}));e.cart.splice(n,1)}},extraReducers:function(e){e.addCase(F.pending,(function(e){e.loading=!0})).addCase(F.fulfilled,(function(e,t){t.payload;e.loading=!1,e.cart=[]})).addCase(F.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a}))}}),K=function(e){return e.cart},Q=Object(w.c)(K,(function(e){return e.cart})),Y=Object(w.c)(K,(function(e){return e.loading})),J=G.actions,X=J.addItem,Z=J.removeItem,$=J.updateQty,ee=J.setDiscount,te=G.reducer,ae=a(12),ne=a(296),re=a(271),ce=a(31),ie=a(291);var se=function(e){var t=e.item,a=Object(y.b)(),r=Object(n.useState)(parseInt(t.item_price)*parseInt(t.qty)),c=Object(d.a)(r,2),i=c[0],s=c[1];return Object(n.useEffect)((function(){s(parseInt(t.item_price)*parseInt(t.qty))}),[t.qty]),Object(n.useEffect)((function(){s(t.total_per_unit)}),[t.total_per_unit]),Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(x.a,{component:ie.a.tr,initial:{y:-100,opacity:0},animate:{y:0,opacity:1},children:[Object(k.jsxs)(m.a,{style:{fontSize:"10px"},children:[Object(k.jsx)(p.a,{color:"grey",icon:u.b}),"\xa0\xa0",t.item_name]}),Object(k.jsx)(m.a,{children:Object(k.jsx)(ne.a,{error:t.error,variant:"outlined",size:"small",value:t.qty,onChange:function(e){var n=""==e.target.value?0:parseInt(e.target.value);a($(Object(ae.a)(Object(ae.a)({},t),{},{qty:n})))},inputProps:{style:{textAlign:"center",fontSize:"10px"}},style:{WebkitAppRegion:"no-drag"}})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(ce.a,{thousandSeparator:!0,displayType:"text",value:i,style:{fontSize:"10px"},decimalScale:2,decimalSeparator:".",fixedDecimalScale:!0})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(ne.a,{disabled:t.error,variant:"outlined",size:"small",value:100*t.discount,inputProps:{style:{textAlign:"center",fontSize:"10px",width:"50px"}},onChange:function(e){a(ee(Object(ae.a)(Object(ae.a)({},t),{},{discount:""===e.target.value?0:parseInt(e.target.value)})))},style:{WebkitAppRegion:"no-drag"}})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(re.a,{color:"secondary",onClick:function(){a(Z(t._id))},style:{WebkitAppRegion:"no-drag"},children:Object(k.jsx)(p.a,{icon:u.q})})})]},t._id)})};var oe=function(e){var t=Object(y.b)(),a=Object(y.c)(Q),r=Object(y.c)((function(e){return e.cart})).loading,c=Object(n.useState)([]),i=Object(d.a)(c,2),o=i[0],l=i[1],_=Object(n.useState)(0),C=Object(d.a)(_,2),w=C[0],P=C[1],R=Object(n.useState)(8),I=Object(d.a)(R,2),A=I[0],W=I[1],z=Object(s.f)();return Object(n.useEffect)((function(){l(a)}),[a]),r?Object(k.jsx)(S,{}):Object(k.jsx)(j.a,{component:b.a,elevation:2,style:{minHeight:"600px",position:"relative"},children:Object(k.jsxs)(f.a,{size:"small",stickyHeader:!0,children:[Object(k.jsx)(h.a,{children:Object(k.jsxs)(x.a,{children:[Object(k.jsx)(m.a,{children:"Name"}),Object(k.jsx)(m.a,{style:{textAlign:"center"},children:"QTY"}),Object(k.jsx)(m.a,{children:"Total"}),Object(k.jsx)(m.a,{children:"Discount"}),Object(k.jsx)(m.a,{children:"Action"})]})}),Object(k.jsx)(O.a,{children:o.slice(w*A,w*A+A).map((function(e){return Object(k.jsx)(se,{item:e})}))}),Object(k.jsxs)(x.a,{style:{position:"absolute",bottom:"0",left:"0"},children:[Object(k.jsx)(m.a,{colSpan:1,children:Object(k.jsx)(g.a,{variant:"contained",size:"small",style:{backgroundColor:"green",color:"#ffffff",WebkitAppRegion:"no-drag"},startIcon:Object(k.jsx)(p.a,{icon:u.n}),onClick:function(){if(0==o.length)return t(T({message:"Cart is Empty",severity:"error"}));var e=[];if(o.map((function(t){!0===t.error&&e.push(t.error)})),e.length>0)return t(T({message:"Invalid Quantity",severity:"error"}));z.push("/transaction",a)},children:"Checkout"})}),Object(k.jsx)(m.a,{colSpan:4,children:Object(k.jsx)(v.a,{rowsPerPageOptions:[8,16,800],count:o.length,rowsPerPage:A,page:w,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){W(+e.target.value),P(0)},labelRowsPerPage:!1})})]})]})})},le=E.a.create({timeout:124e3}),de=function(e){return new Promise((function(t){return setTimeout(t,e)}))},ue=Object(w.b)("products/selectAllProducts",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=t.opt,e.next=11,le(Object(ae.a)(Object(ae.a)({baseURL:"http://".concat(s,":8081/api/v1")},o),{},{method:"GET"}));case 11:return l=e.sent,e.next=14,de(2e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),pe=Object(w.b)("products/searchProduct",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=t.opt,e.next=11,le(Object(ae.a)(Object(ae.a)({baseURL:"http://".concat(s,":8081/api/v1")},o),{},{method:"GET"}));case 11:return l=e.sent,e.next=14,de(2e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),je=Object(w.b)("products/selectSingleProduct",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=12;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",e.next=10,le({baseURL:"http://".concat(s,":8081/api/v1"),method:"GET",url:"/products/"+t});case 10:return o=e.sent,e.abrupt("return",o.data);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}()),be=(Object(w.b)("products/createTransaction",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=12;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",e.next=10,le({baseURL:"http://".concat(s,":8081/api/v1"),method:"POST",url:"/products",data:t});case 10:return o=e.sent,e.abrupt("return",o.data);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}()),Object(w.d)({selectId:function(e){return e._id},sortComparer:function(e){return e.createdAt}})),fe=Object(w.e)({name:"products",initialState:be.getInitialState({loading:!1,selectedProd:[],error:null}),reducers:{clearProducts:function(e){e.entities=[]}},extraReducers:function(e){e.addCase(ue.pending,(function(e){e.loading=!0})).addCase(ue.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,be.setAll(e,a)})).addCase(ue.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a})).addCase(pe.pending,(function(e){e.loading=!0})).addCase(pe.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,be.setAll(e,a)})).addCase(pe.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a})).addCase(je.pending,(function(e,t){t.payload;e.loading=!0})).addCase(je.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,be.addOne(e,a)})).addCase(je.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a}))}}),he=Object(w.c)((function(e){return e.products}),(function(e){return e.loading})),xe=(fe.actions.clearProducts,be.getSelectors((function(e){return e.products}))),me=fe.reducer;var Oe=function(e){var t=e.item,a=Object(y.b)();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(x.a,{hover:!0,style:{cursor:"pointer"},children:[Object(k.jsxs)(m.a,{style:{fontSize:"10px"},children:[Object(k.jsx)(p.a,{color:"grey",icon:u.a}),"\xa0\xa0",t.item_name]}),Object(k.jsx)(m.a,{style:{fontSize:"10px"},children:t.item_qty}),Object(k.jsx)(m.a,{style:{fontSize:"10px"},children:t.item_price}),Object(k.jsx)(m.a,{children:Object(k.jsx)(re.a,{color:"primary",onClick:function(){a(X(t))},style:{WebkitAppRegion:"no-drag"},children:Object(k.jsx)(p.a,{icon:u.k})})})]},t._id)})};var ge=function(){var e=Object(y.b)(),t=Object(y.c)(xe.selectAll),a=Object(y.c)((function(e){return e.settings})).loading,r=(Object(y.c)((function(e){return e.connection})).isConnected,Object(y.c)(he)),c=Object(n.useState)(0),i=Object(d.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)(8),u=Object(d.a)(l,2),p=u[0],g=u[1];return Object(n.useEffect)((function(){e(ue({opt:{url:"/products"}}))}),[]),r||a?Object(k.jsx)(S,{}):Object(k.jsx)("div",{children:Object(k.jsx)(j.a,{component:b.a,style:{minHeight:"600px",position:"relative"},children:Object(k.jsxs)(f.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table",children:[Object(k.jsx)(h.a,{children:Object(k.jsxs)(x.a,{children:[Object(k.jsx)(m.a,{children:"Name"}),Object(k.jsx)(m.a,{children:"QTY"}),Object(k.jsx)(m.a,{children:"Price"}),Object(k.jsx)(m.a,{children:"Action"})]})}),Object(k.jsx)(O.a,{children:t.slice(s*p,s*p+p).map((function(e){return Object(k.jsx)(Oe,{item:e})}))}),Object(k.jsx)(x.a,{style:{position:"absolute",bottom:"0",left:"0"},children:Object(k.jsx)(m.a,{colSpan:4,children:Object(k.jsx)(v.a,{rowsPerPageOptions:[8,16,800],count:t.length,rowsPerPage:p,page:s,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){g(+e.target.value),o(0)}})})})]})})})},ve={Dashboard:{height:"90%"},infoBlock:{height:"50px",borderRadius:"10px",background:"#fff"},ContentBlock:{height:"90%",borderRadius:"10px",padding:"20px"}};var ye=Object(l.a)(ve)((function(e){var t=e.classes,a=t.ContentBlock,n=t.Dashboard;return t.infoBlock,Object(s.f)(),Object(k.jsxs)(o.a,{container:!0,className:n,spacing:2,children:[Object(k.jsx)(o.a,{direction:"column",item:!0,container:!0,lg:6,sm:6,children:Object(k.jsx)(oe,{})}),Object(k.jsx)(o.a,{item:!0,lg:6,sm:6,className:a,children:Object(k.jsx)(ge,{})})]})})),_e={"@global":{body:{height:"100%",margin:"0px","& #root":{height:"100%"},overflow:"hidden",position:"relative",borderRadius:"15px"},html:{height:"95%",margin:"0px",padding:"20px"}},root:{height:"100%",background:"#EBEBF7",padding:"20px",borderRadius:"20px",position:"relative"},ContainerWrap:{height:"auto",padding:"20px 0px 0px 0px !important",position:"relative"}},Ce=a(298),ke=a(295);var Se=function(e){var t=e.handleCloseToast,a=Object(y.c)((function(e){return e.notifications})),n=a.message,r=a.severity,c=a.open;return Object(k.jsx)(Ce.a,{open:c,autoHideDuration:4e3,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{bottom:"50px",right:"50px",WebkitAppRegion:"no-drag"},children:Object(k.jsx)(ke.a,{elevation:6,variant:"filled",onClose:t,severity:r,children:n})})},we=a(148),Pe=a(239),Re=a(146),Te=a(238),Ie=a(278),Ae=a(300),We=a(279),ze={TransactionModal:{display:"flex",alignItems:"center",justifyContent:"center",WebkitAppRegion:"no-drag"},ModalContent:{borderRadius:"10px",padding:"20px",width:"400px",height:"400px",backgroundColor:"#ffffff",outline:"none",position:"relative"},SuccessPageModal:{outline:"none",height:"650px",padding:"30px"}},De=E.a.create({timeout:124e3}),Ne=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Ee=Object(w.b)("report/CreateTransactionReport",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=17;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=t.url,e.next=11,De({baseURL:"http://".concat(s,":8081/api/v1/gc-print"),url:o,method:"GET"});case 11:return l=e.sent,e.next=14,Ne(2e3);case 14:return e.next=16,l.data;case 16:return e.abrupt("return",e.sent);case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,a){return e.apply(this,arguments)}}()),Le=a(60),Be=a.n(Le),Me=a(95),Ue=a.n(Me),He=a(143),qe=new Intl.NumberFormat("en-PH",{style:"currency",currency:"Php"});Be.a.fonts={Roboto:{normal:"Roboto-Regular.ttf",bold:"Roboto-Medium.ttf",italics:"Roboto-Italic.ttf",bolditalics:"Roboto-MediumItalic.ttf"},Charlie_dotted:{normal:"charlie_dotted.ttf",bold:"charlie_dotted.ttf",italics:"charlie_dotted.ttf",bolditalics:"charlie_dotted.ttf"},DOT_MATRIX:{normal:"DOTMATRI.TTF",bold:"DOTMATRI.TTF",italics:"DOTMATRI.TTF",bolditalics:"DOTMATRI.TTF"},FAKE_RECEIPT:{normal:"fake receipt.ttf",bold:"fake receipt.ttf",italics:"fake receipt.ttf",bolditalics:"fake receipt.ttf"}};var Fe=function(e,t){var a,n,r,c,i,s,o=[];e.map((function(e){var t=e[4].discount*e[4].price;a=e[4].customer_name,n=new Date(e[4].date).toLocaleDateString(),e[4].transact_type,r=e[4].total_amount,c=e[4].change_amount,i=e[4].cash_amount,s=e[4]._id,console.log(typeof e[4].total_amount),o.push(t)}));var l=o.reduce((function(e,t){return e+t}),0);return{pageSize:{width:684,height:396},pageMargins:[40,50,40,90],header:function(e){if(1===e)return{columns:[{image:"data:image/png;base64,".concat(t),width:40,height:40,margin:[20,3,0,0]},{stack:[{text:"GLORIOCITY \n",style:"header"},{text:"CONSTRUCTION SUPPLY",style:"subheader"}],margin:[20,12]},{stack:[{text:"4024 BLOCK 2 LOT 17-18",color:"#808080"},{text:"MONDO STRIP JUBILATION",color:"#808080"},{text:"BRGY.PLATERO",color:"#808080"}],alignment:"right",margin:[20,12],fontSize:8}],margin:[20,8],width:"*"}},footer:function(e,t){if(e===t)return{stack:[{table:{widths:["*",150,150],headerRows:1,body:[[{text:"Prepared by : ",style:{fontSize:9}},{text:"Discount : ".concat(qe.format(l)),style:{fontSize:9,font:"Roboto"}},{text:"Amount to pay : ".concat(qe.format(r)),style:{fontSize:9,font:"Roboto"}}],[{text:"",border:[!1,!1,!1,!1]},{text:["Cash : ",{text:"".concat(i),style:{alignment:"center",font:"Roboto"}}]},{text:"Change : ".concat(c),style:{font:"Roboto"}}]]}},{text:"**** Nothing Follows ****",style:{fontSize:7,color:"#808080"},alignment:"center",margin:[0,7,0,0]},{text:"Received goods in order and prestine condition\n\nby:______________________________________",style:{fontSize:7},alignment:"right",margin:[0,7,0,0]}],margin:[40,0]}},content:[{columns:[{text:"ORDER SLIP",style:{fontSize:12,color:"#808080"}}],alignment:"center"},{stack:[{columns:[{text:["Customer Name : ",{text:"".concat(a),italics:!0}],bold:!0,fontSize:9,margin:[0,5,0,0]},{text:["Transaction Date : ",{text:"".concat(n),italics:!0}],bold:!0,fontSize:9,margin:[0,5,0,0]}]},{columns:[{text:["Total Amount : ",{text:"Php ".concat(r),font:"Roboto"}],bold:!0,fontSize:9,margin:[0,5,0,10]},{text:["Receipt# : ",{text:"".concat(s),fontSize:7}],bold:!0,fontSize:9,margin:[0,5,0,10]}]},{layout:{hLineWidth:function(e,t){return 0===e||e===t.table.body.length?1:0},hLineHeight:function(e,t){return 1===e?0:1},paddingBottom:function(e,t,a){if(e===t.table.body.length-1){var n=t.positions[t.positions.length-1],r=n.pageInnerHeight-n.top;return r<0?2:r}return 2}},table:{headerRows:1,widths:[40,40,"*",80,80],body:[[{text:"QTY",style:"tableHeader"},{text:"UNIT",style:"tableHeader"},{text:"Item Name",style:"tableHeader"},{text:"Unit Price",style:"tableHeader"},{text:"Amount",style:"tableHeader"}]].concat(Object(He.a)(e))}}],margin:[0,10,0,0]}],styles:{header:{bold:!0,color:"#808080"},subheader:{fontSize:9},tableHeader:{fontSize:9,color:"white",fillColor:"grey",alignment:"center",margin:[0,6],border:[!0,!1,!0,!1]},tableItems:{alignment:"center",margin:[0,5],fontSize:8,color:"#808080"},tableItemsAmount:{alignment:"center",margin:[0,6],fontSize:9,font:"Roboto",color:"#808080"}},defaultStyle:{font:"FAKE_RECEIPT",columnGap:5,color:"#808080",fontSize:9}}};var Ve=Object(l.a)(ze)((function(e){var t=Object(y.b)(),a=Object(y.c)(Y),r=Object(s.g)().state,c=Object(n.useState)(!1),i=Object(d.a)(c,2),l=i[0],j=i[1],b=Object(s.f)(),f=e.classes,h=f.TransactionModal,x=f.ModalContent,m=Object(n.useState)(0),O=Object(d.a)(m,2),v=O[0],_=O[1],C=Object(n.useState)({customer_name:"",transact_payment_type:"full",cash_amount:0,transact_status:!0}),w=Object(d.a)(C,2),P=w[0],R=w[1],I=function(){var e=Object(D.a)(z.a.mark((function e(a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.payload){e.next=8;break}return n=a.payload.transact_id,e.next=4,t(Ee({url:"/transactions/"+n}));case 4:r=e.sent,Ee.fulfilled.match(r)?(c=r.payload,i=c.doc,s=c.logo,(o=JSON.parse(i)).length>0?(Be.a.vfs=Ue.a.pdfMake.vfs,l=Fe(o,s),Be.a.createPdf(l).getBlob((function(e){var t=window.URL.createObjectURL(e);b.push("/transaction/success?pdf="+t)}))):t(T({message:"No Transaction has been made.",severity:"error"}))):t(T({message:"Transaction Failed, Pls try again.",severity:"error"})),e.next=10;break;case 8:return e.next=10,b.goBack();case 10:j(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){j(!0),r.map((function(e){var t=e.total_per_unit;_((function(e){return e+t}))}))}),[]),a?Object(k.jsx)(S,{}):Object(k.jsx)(we.a,{open:l,onClose:I,BackdropComponent:Pe.a,BackdropProps:{timeout:500,style:{borderRadius:"20px",height:"730px"}},className:h,children:Object(k.jsx)(Re.a,{in:l,children:Object(k.jsx)("div",{className:x,children:Object(k.jsxs)(o.a,{container:!0,spacing:2,children:[Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsxs)(Te.a,{variant:"h6",children:["Total Number of Order :\xa0",Object(k.jsx)(ce.a,{displayType:"text",value:r.length,customInput:ne.a,fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.e})})}})]})}),Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsxs)(Te.a,{variant:"h6",children:["Total Price :\xa0",Object(k.jsx)(ce.a,{displayType:"text",value:v,customInput:ne.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,decimalSeparator:".",prefix:"Php ",fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.e})})}})]})}),Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsxs)(Te.a,{variant:"h6",children:["Cash Change :\xa0",Object(k.jsx)(ce.a,{displayType:"text",value:0==P.cash_amount?0:P.cash_amount-v,customInput:ne.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,decimalSeparator:".",fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.e})})}})]})}),Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsx)(ne.a,{fullWidth:!0,variant:"outlined",value:P.customer_name,onChange:function(e){R((function(t){return Object(ae.a)(Object(ae.a)({},t),{},{customer_name:e.target.value})}))},label:"Customer Name",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.r})})}})}),Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsx)(ce.a,{error:"full"==P.transact_payment_type&&P.cash_amount<v||0==P.cash_amount&&"partial"==P.transact_payment_type,label:"Cash Amount",fullWidth:!0,variant:"outlined",customInput:ne.a,value:P.cash_amount,decimalScale:2,decimalSeparator:".",fixedDecimalScale:!0,InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.h})})},onChange:function(e){var t=e.target.value;R((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{cash_amount:t})}))}})}),Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsxs)(ne.a,{fullWidth:!0,variant:"outlined",select:!0,label:"Payment Type",value:P.transaction_payment_type,onChange:function(e){var t=e.target.value;R((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{transact_payment_type:t})}))},children:[Object(k.jsx)(Ae.a,{value:"full",children:"Full Payment"}),Object(k.jsx)(Ae.a,{value:"partial",children:"Partial Payment"})]})}),Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,style:{position:"absolute",bottom:"0",left:"0"},children:Object(k.jsxs)(We.a,{variant:"outlined",color:"primary","aria-label":"contained primary button group",children:[Object(k.jsx)(g.a,{fullWidth:!0,startIcon:Object(k.jsx)(p.a,{color:"green",icon:u.i}),onClick:Object(D.a)(z.a.mark((function e(){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=P.customer_name){e.next=2;break}return e.abrupt("return");case 2:if(0!==P.cash_amount){e.next=4;break}return e.abrupt("return");case 4:if(!("full"==P.transact_payment_type&&P.cash_amount<v)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t(F({values:r.map((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{customer_name:P.customer_name,total_amount:v,cash_amount:P.cash_amount,change_amount:P.cash_amount-v,transact_payment_type:""===P.transact_payment_type?P.cash_amount>=v?"full":"partial":P.transact_payment_type,transact_status:"full"===P.transact_payment_type})}))}));case 8:a=e.sent,F.fulfilled.match(a)?I(a):F.rejected.match(a)&&(t(T({message:"Error : "+a.payload,severity:"error"})),I());case 10:case"end":return e.stop()}}),e)}))),children:"Process Order"}),Object(k.jsx)(g.a,{onClick:I,children:"Cancel"})]})})]})})})})})),Ge=a(293),Ke=a(280),Qe=a(281),Ye=a(282),Je=a(283),Xe=a(140),Ze=Object(w.e)({name:"connection",initialState:{isConnected:!1},reducers:{setConnection:function(e,t){var a=t.payload;e.isConnected=a}}}),$e=Ze.actions.setConnection,et=Ze.reducer;var tt=Object(l.a)(C)((function(e){var t=window.require("electron").ipcRenderer,a=e.searchRef,r=e.classes.HeaderWrap,c=Object(y.b)(),i=Object(y.c)((function(e){return e.connection})).isConnected,l=Object(y.c)((function(e){return e.settings})).loading,d=Object(s.f)(),j=function(){var e=Object(D.a)(z.a.mark((function e(){var t,a,n,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(U({url:"/settings"}));case 3:t=e.sent,U.fulfilled.match(t)&&(a=t.payload.settings,n=void 0!==a.address?a.address:"localhost",(r=Object(Xe.io)("http://".concat(n,":8081"))).on("connect",(function(){c($e(r.connected))})),r.on("disconnect",(function(){c($e(r.connected))}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c(T({message:"Settings not loaded.",severity:"error"}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){j()}),[]),l?Object(k.jsx)(S,{}):Object(k.jsxs)(o.a,{item:!0,container:!0,lg:12,sm:12,className:r,component:b.a,elevation:2,style:{display:"flex !important",flexDirection:"row",justifyContent:"space-between"},children:[Object(k.jsxs)(Ge.a,{style:{WebkitAppRegion:"no-drag",height:"40px",alignSelf:"center",display:"flex"},children:[Object(k.jsx)(ne.a,{size:"small",margin:"none",variant:"outlined",label:"Search Product",inputRef:a,InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.m})})},onKeyPress:function(e){"Enter"===e.key&&c(pe({opt:{url:"/products/search/"+e.target.value}}))}}),Object(k.jsx)(Ke.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(k.jsx)(Ge.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center"},children:Object(k.jsx)(re.a,{size:"small",onClick:function(){c(ue({opt:{url:"/products"}}))},children:Object(k.jsx)(p.a,{color:"blue",icon:u.o})})}),Object(k.jsx)(Ke.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(k.jsx)(Ge.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center",justifySelf:"flex-end"},children:Object(k.jsx)(g.a,{variant:"contained",color:"primary",startIcon:Object(k.jsx)(p.a,{icon:u.g}),size:"small",onClick:function(){d.push("/translist")},children:"Transactions"})}),Object(k.jsx)(Ke.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(k.jsxs)(Ge.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center",justifySelf:"flex-end"},children:[Object(k.jsx)(Qe.a,{fontSize:"small",htmlColor:i?"green":"maroon"}),Object(k.jsxs)(Te.a,{variant:"caption",children:["\xa0",i?"Connected to Server":"Disconnected"]})]})]}),Object(k.jsxs)(Ge.a,{style:{WebkitAppRegion:"no-drag",alignSelf:"center"},children:[Object(k.jsx)(re.a,{size:"small",component:ie.a.div,whileHover:{scale:1.1},onClick:function(){d.push("/settings")},children:Object(k.jsx)(p.a,{icon:u.d})}),Object(k.jsx)(re.a,{size:"small",component:ie.a.div,whileHover:{scale:1.1},onClick:function(){t.invoke("min")},children:Object(k.jsx)(Ye.a,{color:"primary"})}),Object(k.jsx)(re.a,{size:"small",component:ie.a.div,whileHover:{scale:1.1},onClick:function(){t.invoke("close")},children:Object(k.jsx)(Je.a,{color:"secondary"})}),"\xa0\xa0"]})]})})),at=a(284),nt=a(285),rt=a(286),ct=a(287),it=a(276),st=a(26),ot=a(292),lt=a(142),dt=E.a.create({timeout:124e3}),ut=function(e){return new Promise((function(t){return setTimeout(t,e)}))},pt=Object(w.b)("transactions/getAllTransaction",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,c=t.opt,e.prev=2,e.next=5,r(U({url:"/settings"}));case 5:if(i=e.sent,!U.fulfilled.match(i)){e.next=15;break}return s=i.payload.settings,o=void 0!==s.address?s.address:"localhost",e.next=11,dt(Object(ae.a)(Object(ae.a)({},c),{},{baseURL:"http://".concat(o,":8081/api/v1"),method:"GET"}));case 11:return l=e.sent,e.next=14,ut(2e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(2),e.abrupt("return",n(e.t0));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,a){return e.apply(this,arguments)}}()),jt=(Object(w.b)("transactions/getSingleTransaction",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,c=t.opt,e.prev=2,e.next=5,r(U({url:"/settings"}));case 5:if(i=e.sent,!U.fulfilled.match(i)){e.next=15;break}return s=i.payload.settings,o=void 0!==s.address?s.address:"localhost",e.next=11,dt(Object(ae.a)(Object(ae.a)({},c),{},{baseURL:"http://".concat(o,":8081/api/v1"),method:"GET"}));case 11:return l=e.sent,e.next=14,ut(2e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(2),e.abrupt("return",n(e.t0));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,a){return e.apply(this,arguments)}}()),Object(w.b)("transactions/createTransaction",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,c=t.opt,i=t.values,e.prev=2,e.next=5,r(U({url:"/settings"}));case 5:if(s=e.sent,!U.fulfilled.match(s)){e.next=15;break}return o=s.payload.settings,l=void 0!==o.address?o.address:"localhost",e.next=11,dt(Object(ae.a)(Object(ae.a)({},c),{},{baseURL:"http://".concat(l,":8081/api/v1"),method:"POST",data:i}));case 11:return d=e.sent,e.next=14,ut(2e3);case 14:return e.abrupt("return",d.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(2),e.abrupt("return",n(e.t0));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,a){return e.apply(this,arguments)}}())),bt=Object(w.b)("transactions/findTransaction",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=t.opt,e.next=11,dt(Object(ae.a)(Object(ae.a)({},o),{},{baseURL:"http://".concat(s,":8081/api/v1"),method:"GET"}));case 11:return l=e.sent,e.next=14,ut(2e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),ft=Object(w.b)("transactions/getDocDef",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=14;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=t.opt,e.next=11,dt(Object(ae.a)(Object(ae.a)({},o),{},{baseURL:"http://".concat(s,":8081/api/v1"),method:"GET",responseType:"blob",headers:{Accept:"application/pdf","Content-Type":"application/pdf",mode:"no-cors"}}));case 11:return l=e.sent,d=window.URL.createObjectURL(l.data),e.abrupt("return",d);case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,a){return e.apply(this,arguments)}}()),ht=Object(w.b)("transactions/updateTransaction",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=t.opt,l=t.value,e.next=11,dt(Object(ae.a)(Object(ae.a)({},o),{},{baseURL:"http://".concat(s,":8081/api/v1"),method:"PATCH",data:l}));case 11:return d=e.sent,e.next=14,ut(2e3);case 14:return e.abrupt("return",d.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),xt=Object(w.b)("transactions/deleteTransaction",function(){var e=Object(D.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(U({url:"/settings"}));case 4:if(c=e.sent,!U.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=t.opt,e.next=11,dt(Object(ae.a)(Object(ae.a)({},o),{},{baseURL:"http://".concat(s,":8081/api/v1"),method:"DELETE"}));case 11:return l=e.sent,e.next=14,ut(2e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),mt=Object(at.a)((function(e){return{Modal:{display:"flex",alignItems:"center",justifyContent:"center"},ModalContent:{width:"450px",height:"auto",borderRadius:"5px",background:"#ffffff",outline:"none",padding:"25px"}}})),Ot=function(e){var t=e.data,a=e.fn,r=Object(y.b)(),c=Object(y.c)((function(e){return e.report})).loading,i=Object(n.useState)({partial_payments:0}),l=Object(d.a)(i,2),j=l[0],b=l[1],f=Object(s.f)();return c?Object(k.jsx)(S,{}):Object(k.jsxs)(o.a,{item:!0,container:!0,lg:12,sm:12,spacing:2,children:["partial"===t.payment_type?Object(k.jsx)(o.a,{item:!0,lg:4,sm:4,children:Object(k.jsx)(ce.a,{customInput:ne.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,size:"small",fullWidth:!0,label:"Amount",margin:"dense",variant:"outlined",onChange:function(e){b((function(t){return Object(ae.a)(Object(ae.a)({},t),{},{partial_payments:parseInt(e.target.value)})}))},InputProps:{style:{color:"partial"==t.payment_type?"maroon":"green"},startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.j})})}})}):Object(k.jsx)("div",{}),Object(k.jsx)(o.a,{item:!0,lg:8,sm:8,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(k.jsxs)(We.a,{variant:"contained",children:["partial"===t.payment_type?Object(k.jsx)(g.a,{size:"small",color:"secondary",style:{background:"green"},onClick:Object(D.a)(z.a.mark((function e(){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(ht({opt:{url:"/transactions/"+t._id},value:j}));case 2:a=e.sent,ht.fulfilled.match(a)?r(T({message:"Transaction Updated",severity:"success"})):r(T({message:"Transaction Update Failed",severity:"error"}));case 4:case"end":return e.stop()}}),e)}))),startIcon:Object(k.jsx)(p.a,{icon:Object(k.jsx)(Je.a,{})}),children:"Pay"}):Object(k.jsx)(g.a,{size:"small",disabled:!0,children:"Paid"}),Object(k.jsx)(g.a,{size:"small",color:"primary",onClick:Object(D.a)(z.a.mark((function e(){var a,n,c,i,s,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(Ee({url:"/transactions/"+t._id}));case 2:a=e.sent,Ee.fulfilled.match(a)?(n=a.payload,c=n.doc,i=n.logo,(s=JSON.parse(c)).length>0&&(Be.a.vfs=Ue.a.pdfMake.vfs,o=Fe(s,i),Be.a.createPdf(o).getBlob((function(e){console.log(e);var t=window.URL.createObjectURL(e);f.push("/transaction/success?pdf="+t+"&page=transaction")})))):r(T({message:"Cannot Print Transaction, please try again.",severity:"error"}));case 4:case"end":return e.stop()}}),e)}))),startIcon:Object(k.jsx)(p.a,{icon:u.l}),children:"Print"}),Object(k.jsx)(g.a,{size:"small",color:"secondary",onClick:function(){f.push("/transaction/delete/"+t._id)},startIcon:Object(k.jsx)(p.a,{icon:Object(k.jsx)(Je.a,{})}),children:"Delete"}),Object(k.jsx)(g.a,{size:"small",style:{background:"orange"},onClick:a,startIcon:Object(k.jsx)(p.a,{icon:Object(k.jsx)(Je.a,{})}),children:"Cancel"})]})})]})};var gt=function(e){var t=e.inOpen,a=e.onClose,n=e.data,r=Object(y.c)((function(e){return e.transactions})).loading,c=mt();return r?Object(k.jsx)(S,{}):Object(k.jsx)(we.a,{open:t,onClose:a,BackdropComponent:Pe.a,BackdropProps:{timeout:500,style:{height:"730px",borderRadius:"15px"}},className:c.Modal,children:Object(k.jsx)(Re.a,{in:t,children:Object(k.jsx)("div",{className:c.ModalContent,children:Object(k.jsxs)(o.a,{container:!0,spacing:2,children:[Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsx)(ne.a,{size:"small",fullWidth:!0,disabled:!0,label:"Receipt No",value:n._id,variant:"outlined",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.f})})}})}),Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsx)(ne.a,{size:"small",fullWidth:!0,disabled:!0,label:"Customer",value:n.customer_name,variant:"outlined",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.r})})}})}),Object(k.jsx)(o.a,{item:!0,lg:4,sm:4,children:Object(k.jsx)(ne.a,{size:"small",fullWidth:!0,label:"Item in cart",value:n.cart_count,variant:"outlined",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.b})})}})}),Object(k.jsx)(o.a,{item:!0,lg:8,sm:8,children:Object(k.jsx)(ne.a,{size:"small",disabled:"full"===n.payment_type,fullWidth:!0,label:"Transaction Date",value:new Date(n.transaction_date).toISOString().split("T")[0],variant:"outlined",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.c})})}})}),Object(k.jsx)(o.a,{item:!0,lg:5,sm:5,children:Object(k.jsx)(ne.a,{size:"small",fullWidth:!0,label:"Payment Type",value:n.payment_type,variant:"outlined",InputProps:{style:{color:"partial"==n.payment_type?"maroon":"green"},startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.j})})}})}),Object(k.jsx)(o.a,{item:!0,lg:7,sm:7,children:Object(k.jsx)(ce.a,{customInput:ne.a,fixedDecimalScale:!0,disabled:"full"===n.payment_type,decimalScale:2,thousandSeparator:!0,allowNegative:!1,prefix:"Php ",size:"small",fullWidth:!0,label:"partial"==n.payment_type?"Remaining Balance":"Change Amount",value:n.change_amount,variant:"outlined",InputProps:{style:{color:"partial"==n.payment_type?"maroon":"green"},startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.j})})}})}),Object(k.jsx)(Ot,{fn:a,data:n})]})})})})};var vt=function(e){var t=e.transaction,a=Object(n.useState)(!1),r=Object(d.a)(a,2),c=r[0],i=r[1],o=Object(s.f)();return Object(k.jsxs)(x.a,{hover:!0,onDoubleClick:function(){i(!0)},style:{background:"partial"==t.payment_type?"#fafafa":"",cursor:"pointer",userSelect:"none"},children:[Object(k.jsx)(m.a,{children:t.customer_name}),Object(k.jsx)(m.a,{style:{textAlign:"center"},children:t.cart_count}),Object(k.jsx)(m.a,{style:{textAlign:"center"},children:t.transaction_date.split("T")[0]}),Object(k.jsx)(m.a,{style:{textAlign:"center"},children:t.payment_type}),Object(k.jsx)(m.a,{style:{textAlign:"center"},children:Object(k.jsx)(ce.a,{displayType:"text",value:t.cash_amount,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,prefix:"Php "})}),Object(k.jsx)(m.a,{style:{textAlign:"center"},children:Object(k.jsx)(ce.a,{displayType:"text",value:t.total_price,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,prefix:"Php "})}),Object(k.jsx)(m.a,{style:{textAlign:"center"},children:Object(k.jsx)(ce.a,{displayType:"text",value:t.change_amount,allowNegative:!1,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,prefix:"Php "})}),Object(k.jsx)(gt,{data:t,inOpen:c,onClose:function(){o.goBack(),i(!1)}})]},t._id)},yt=Object(at.a)((function(e){return{appBar:{position:"relative",background:"#ffffff"}}})),_t=Object(n.forwardRef)((function(e,t){return Object(k.jsx)(nt.a,Object(ae.a)({direction:"up",ref:t},e))}));var Ct=function(e){var t=yt(),a=Object(s.f)(),r=Object(y.b)(),c=Object(y.c)((function(e){return e.transactions})).entities,i=Object(y.c)((function(e){return e.transactions})).loading,l=Object(n.useState)(!1),g=Object(d.a)(l,2),_=g[0],C=g[1],w=Object(n.useState)(0),P=Object(d.a)(w,2),R=P[0],T=P[1],I=Object(n.useState)(8),A=Object(d.a)(I,2),W=A[0],z=A[1],D=Object(n.useState)(""),N=Object(d.a)(D,2),E=N[0],L=N[1],B=function(){C(!1),a.goBack()};Object(n.useEffect)((function(){C(!0),r(pt({opt:{url:"/transactions"}}))}),[]);var M=Object(n.useState)(new Date(Date.now()).toLocaleDateString()),U=Object(d.a)(M,2),H=U[0],q=U[1];return i?Object(k.jsx)(S,{}):Object(k.jsx)(st.a,{utils:lt.a,children:Object(k.jsxs)(rt.a,{fullScreen:!0,open:_,onClose:B,TransitionComponent:_t,BackdropProps:{style:{height:"730px",borderRadius:"15px"}},style:{WebkitAppRegion:"no-drag",padding:"20px",height:"690px",borderRadius:"10px"},children:[Object(k.jsx)(ct.a,{className:t.appBar,children:Object(k.jsxs)(it.a,{style:{justifyContent:"space-between"},children:[Object(k.jsx)(ne.a,{size:"small",variant:"outlined",label:"Search",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(p.a,{icon:u.m})})},style:{flexBasis:"220px",flex:2,marginRight:"10px"},onKeyDown:function(e){L(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&r(bt({opt:{url:"/search/transactions?s=".concat(E)}}))}}),Object(k.jsx)(ot.a,{disableToolbar:!0,variant:"inline",format:"yyyy-dd-MM",size:"small",margin:"dense",id:"date-picker-inline",label:"Filter Date",value:H,onChange:function(e){q(new Date(e));var t=new Date(e);r(bt({opt:{url:"/search/transactions?date=".concat(t)}}))},KeyboardButtonProps:{"aria-label":"change date"},style:{alignSelf:"flex-start",flex:1}}),Object(k.jsx)(re.a,{focusRipple:!1,style:{margin:"0px 8px"},size:"small",onClick:B,children:Object(k.jsx)(Je.a,{color:"secondary"})})]})}),Object(k.jsx)(o.a,{container:!0,children:Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,style:{padding:"30px"},children:Object(k.jsx)(j.a,{component:b.a,elevation:2,children:Object(k.jsxs)(f.a,{stickyHeader:!0,size:"medium",children:[Object(k.jsx)(h.a,{children:Object(k.jsxs)(x.a,{children:[Object(k.jsx)(m.a,{style:{fontWeight:600},children:"Customer Name"}),Object(k.jsx)(m.a,{style:{fontWeight:600,textAlign:"center"},children:"In cart"}),Object(k.jsx)(m.a,{style:{fontWeight:600,textAlign:"center"},children:"Transaction date"}),Object(k.jsx)(m.a,{style:{fontWeight:600,textAlign:"center"},children:"Payment Type"}),Object(k.jsx)(m.a,{style:{fontWeight:600,textAlign:"center"},children:"Cash Amount"}),Object(k.jsx)(m.a,{style:{fontWeight:600,textAlign:"center"},children:"Total"}),Object(k.jsx)(m.a,{style:{fontWeight:600,textAlign:"center"},children:"Change"})]})}),Object(k.jsx)(O.a,{children:c.slice(R*W,R*W+W).map((function(e){return Object(k.jsx)(vt,{transaction:e})}))}),Object(k.jsx)(v.a,{rowsPerPageOptions:[8,16,800],count:c.length,rowsPerPage:W,page:R,onChangePage:function(e,t){T(t)},onChangeRowsPerPage:function(e){z(+e.target.value),T(0)},labelRowsPerPage:!1})]})})})})]})})},kt=a(288),St=a(233);var wt=Object(St.a)(ze)((function(e){var t=Object(s.f)(),a=Object(n.useState)(!1),r=Object(d.a)(a,2),c=r[0],i=r[1],o=Object(y.c)((function(e){return e.transactions})).loading,l=Object(y.c)((function(e){return e.report})).loading,u=new URLSearchParams(Object(s.g)().search),p=u.get("pdf"),j=u.get("page"),b=e.classes,f=function(){"transaction"===j?t.goBack():t.push("/"),i(!1)};return Object(n.useEffect)((function(){i(!0)}),[]),o||l?Object(k.jsx)(S,{}):Object(k.jsx)(we.a,{open:c,onClose:f,BackdropComponent:Pe.a,BackdropProps:{timeout:500,style:{height:"730px",borderRadius:"15px"}},children:Object(k.jsx)(Re.a,{in:c,children:Object(k.jsxs)("div",{className:b.SuccessPageModal,children:[Object(k.jsx)(kt.a,{size:"small",variant:"circular",onClick:f,style:{position:"absolute",left:15,top:8,WebkitAppRegion:"no-drag"},children:Object(k.jsx)(Je.a,{})}),Object(k.jsx)("iframe",{style:{border:"none",WebkitAppRegion:"no-drag"},onClick:f,src:p+"#toolbar=1",width:"100%",height:"100%"})]})})})})),Pt=a(289),Rt=a(290),Tt={SettingsModal:{WebkitAppRegion:"no-drag",display:"flex",justifyContent:"center",alignItems:"center",outline:"none",borderRadius:"15px"},SettingsContent:{backgroundColor:"#ffffff",width:"450px",height:"auto",outline:"none",padding:"20px"}};var It=Object(l.a)(Tt)((function(e){var t=window.require("electron").ipcRenderer,a=Object(n.useState)(!1),r=Object(d.a)(a,2),c=r[0],i=r[1],l=Object(y.b)(),j=Object(y.c)((function(e){return e.settings})).loading,b=Object(y.c)((function(e){return e.settings.entities})).settings,f=Object(n.useState)(b.address),h=Object(d.a)(f,2),x=h[0],m=h[1],O=Object(s.f)(),v=e.classes;return Object(n.useEffect)((function(){i(!0)}),[]),j?Object(k.jsx)(S,{}):Object(k.jsx)(we.a,{open:c,onClose:function(){O.goBack(),i(!1)},BackdropComponent:Pe.a,BackdropProps:{style:{height:"730px",borderRadius:"15px"}},className:v.SettingsModal,children:Object(k.jsx)(Re.a,{in:c,children:Object(k.jsx)("div",{className:v.SettingsContent,children:Object(k.jsxs)(o.a,{container:!0,spacing:2,children:[Object(k.jsx)(o.a,{item:!0,lg:8,sm:8,children:Object(k.jsx)(ne.a,{value:x,variant:"outlined",margin:"dense",fullWidth:!0,label:"Host Address",placeholder:"0.0.0.0",onChange:function(e){m(e.target.value)},InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(Pt.a,{})})}})}),Object(k.jsx)(o.a,{item:!0,lg:4,sm:4,children:Object(k.jsx)(ne.a,{variant:"outlined",margin:"dense",fullWidth:!0,label:"Port",InputProps:{startAdornment:Object(k.jsx)(Ie.a,{position:"start",children:Object(k.jsx)(Rt.a,{})})}})}),Object(k.jsx)(o.a,{item:!0,lg:6,sm:6,children:Object(k.jsx)(g.a,{color:"primary",fullWidth:!0,variant:"contained",size:"medium",startIcon:Object(k.jsx)(p.a,{icon:u.d}),onClick:function(){var e=Object(D.a)(z.a.mark((function e(a){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(M({url:"/settings",data:{address:x}}));case 2:n=e.sent,M.fulfilled.match(n)?(l(T({message:"Settings has been saved.",severity:"success"})),O.push("/"),t.invoke("restart")):l(T({message:"Please run application as `Administrator`\nSettings not save.",severity:"error"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Save"})})]})})})})})),At={Modal:{display:"flex",justifyContent:"center",alignItems:"center",outline:"none"},ModalContent:{background:"#ffffff",height:"auto",width:"350px",outline:"none",padding:"30px"}};var Wt=Object(l.a)(At)((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(s.f)(),l=Object(s.h)().id,j=e.classes,b=Object(y.b)(),f=Object(y.c)((function(e){return e.transactions})).loading,h=function(){i.goBack(),c(!1)};return Object(n.useEffect)((function(){c(!0)}),[]),f?Object(k.jsx)(S,{}):Object(k.jsx)(we.a,{open:r,onClose:h,BackdropComponent:Pe.a,BackdropProps:{timeout:500,style:{WebkitAppRegion:"no-drag",height:"730px",borderRadius:"15px"}},className:j.Modal,children:Object(k.jsx)(Re.a,{in:r,children:Object(k.jsxs)(o.a,{container:!0,className:j.ModalContent,spacing:2,children:[Object(k.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(k.jsx)("h4",{style:{textAlign:"center"},children:"Delete transaction entry?"})}),Object(k.jsx)(o.a,{item:!0,lg:6,sm:6,children:Object(k.jsx)(g.a,{fullWidth:!0,size:"small",variant:"contained",color:"secondary",startIcon:Object(k.jsx)(p.a,{icon:u.p}),onClick:Object(D.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(xt({opt:{url:"/transactions/"+l}}));case 2:t=e.sent,xt.fulfilled.match(t)?(b(T({message:"Transaction has been deleted.",severity:"success"})),h()):b(T({message:"Error deleting transaction.",severity:"error"}));case 4:case"end":return e.stop()}}),e)}))),children:"Delete"})}),Object(k.jsx)(o.a,{item:!0,lg:6,sm:6,children:Object(k.jsx)(g.a,{fullWidth:!0,size:"small",variant:"contained",color:"primary",onClick:h,children:"Cancel"})})]})})})}));var zt=Object(l.a)(_e)((function(e){var t=Object(y.b)(),a=e.classes,r=a.root,c=a.ContainerWrap,l=Object(n.useRef)(null),d=function(){l.current.focus()};return console.log("development"),Object(n.useEffect)((function(){return document.addEventListener("keydown",(function(e){e.ctrlKey&&"f"==e.key&&d()})),function(){document.removeEventListener("keydown",(function(e){e.ctrlKey&&"f"==e.key&&d()}))}}),[]),Object(k.jsx)(i.a,{children:Object(k.jsxs)(o.a,{style:{WebkitAppRegion:"drag"},container:!0,dicrection:"column",className:r,spacing:3,children:[Object(k.jsx)(tt,{searchRef:l}),Object(k.jsxs)(o.a,{item:!0,lg:12,sm:12,className:c,children:[Object(k.jsxs)(s.c,{children:[Object(k.jsx)(s.a,{exact:!0,path:"/",children:Object(k.jsx)(ye,{})}),Object(k.jsx)(s.a,{exact:!0,path:"/products",children:Object(k.jsx)(ge,{})}),Object(k.jsx)(s.a,{exact:!0,path:"/transaction",children:Object(k.jsx)(Ve,{})}),Object(k.jsx)(s.a,{exact:!0,path:"/transaction/success",children:Object(k.jsx)(wt,{})}),Object(k.jsx)(s.a,{exact:!0,path:"/translist",children:Object(k.jsx)(Ct,{})}),Object(k.jsx)(s.a,{exact:!0,path:"/transaction/delete/:id",children:Object(k.jsx)(Wt,{})}),Object(k.jsx)(s.a,{exact:!0,path:"/settings",children:Object(k.jsx)(It,{})})]}),Object(k.jsx)(Se,{handleCloseToast:function(){t(I())}})]})]})})})),Dt=Object(w.e)({name:"transactions",initialState:{entities:[],pdf:[],loading:!1,errors:null},reducers:{},extraReducers:function(e){e.addCase(pt.pending,(function(e){e.loading=!0})).addCase(pt.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(pt.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(bt.pending,(function(e){e.loading=!0})).addCase(bt.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(bt.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(ft.pending,(function(e){e.loading=!0})).addCase(ft.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.pdf=a})).addCase(ft.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(jt.pending,(function(e){e.loading=!0})).addCase(jt.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities[a._id]=a})).addCase(jt.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(ht.pending,(function(e){e.loading=!0})).addCase(ht.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(ht.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(xt.pending,(function(e){e.loading=!0})).addCase(xt.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(xt.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a}))}}).reducer,Nt=Object(w.e)({name:"report",initialState:{doc:"",loading:!1,error:""},reducers:{},extraReducers:function(e){e.addCase(Ee.pending,(function(e){e.loading=!0})).addCase(Ee.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.doc=a})).addCase(Ee.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a}))}}).reducer,Et=Object(w.e)({name:"settings",initialState:{entities:[],loading:!0,error:""},reducers:{},extraReducers:function(e){e.addCase(M.pending,(function(e){e.loading=!0})).addCase(M.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(M.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a})).addCase(U.pending,(function(e){e.loading=!0})).addCase(U.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(U.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a}))}}).reducer,Lt=Object(w.a)({reducer:{settings:Et,products:me,cart:te,notifications:A,transactions:Dt,connection:et,report:Nt}});c.a.render(Object(k.jsx)(y.a,{store:Lt,children:Object(k.jsx)(zt,{})}),document.getElementById("root"))}},[[231,1,2]]]);
//# sourceMappingURL=main.635c29db.chunk.js.map