(this["webpackJsonpgc-client"]=this["webpackJsonpgc-client"]||[]).push([[0],{242:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(21),c=a.n(r),i=a(59),s=a(18),o=a(293),l=a(6),d=a(13),u=a(17),p=a(14),j=a(283),b=a(114),f=a(284),h=a(285),m=a(280),x=a(281),O=a(286),g=a(247),v=a(316),y=a(9),_=a(278),k={ProgressWrap:{top:0,left:0,display:"flex",position:"fixed",justifyContent:"center",flexDirection:"column",alignItems:"center",zIndex:100,backgroundColor:"rgba(0, 0, 0, 0.9)",height:"700px",width:"100%",transition:"all 300ms linear",borderRadius:"20px"},HeaderWrap:{height:"60px",padding:"20px 0px",borderRadius:"10px",WebkitAppRegion:"drag"}},C=a(2);var S=Object(l.a)(k)((function(e){var t=e.classes,a=Object(n.useState)("Loading"),r=Object(d.a)(a,2),c=r[0];return r[1],Object(C.jsxs)("div",{className:t.ProgressWrap,children:[Object(C.jsx)(_.a,{size:70}),Object(C.jsx)("h4",{style:{textAlign:"center",color:"white",letterSpacing:"10px"},children:c})]})})),w=a(15),I=Object(w.e)({name:"notifications",initialState:{open:!1,message:"",severity:""},reducers:{OpenNotification:function(e,t){var a=t.payload;e.open=!0,e.severity=a.severity,e.message=a.message},CloseNotification:function(e,t){t.payload;e.open=!1,e.severity="",e.message=""}}}),P=I.actions,T=P.OpenNotification,R=P.CloseNotification,A=I.reducer,W=a(8),z=a.n(W),E=a(20),D=a(48),q=a.n(D),B=q.a.create({baseURL:"http://localhost:8082/api",timeout:1e3}),N=function(e){return new Promise((function(t){return setTimeout(t,e)}))},L=Object(w.b)("settings/SetIPAddress",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,r=t.url,c=t.data,e.next=5,B({url:r,method:"PATCH",data:c});case 5:return i=e.sent,e.next=8,N(2e3);case 8:return e.abrupt("return",i.data);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()),M=Object(w.b)("settings/GetSettings",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,r=t.url,e.next=5,B({url:r,method:"GET"});case 5:return c=e.sent,e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()),U=q.a.create({timeout:1e3}),H=function(e){return new Promise((function(t){return setTimeout(t,e)}))},V=Object(w.b)("cart/CreateTransaction",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=16;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,l=t.values,e.next=12,U({baseURL:"http://".concat(s,":").concat(o,"/api/v1"),url:"/transactions",method:"POST",data:l});case 12:return d=e.sent,e.next=15,H(1e3);case 15:return e.abrupt("return",d.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()),F=Object(w.d)({selectId:function(e){return e._id}}),G=Object(w.e)({name:"cart",initialState:F.getInitialState({cart:[],loading:!1,error:""}),reducers:{addItem:function(e,t){var a=t.payload,n=e.cart.findIndex((function(e){return e._id===a._id})),r=a._id,c=a.item_name,i=a.discount,s=a.item_price,o=a.item_qty,l=a.inventory_qty,d=a.item_unit,u=a.item_srp,p=o,j=i/100;if(-1!==n){var b=(parseInt(e.cart[n].qty)+parseInt(p))*s,f=(parseInt(e.cart[n].qty)+parseInt(p))*u,h=0!==e.cart[n].discount?b-b*e.cart[n].discount:b,m=0!==e.cart[n].discount?f-f*e.cart[n].discount:f;e.cart[n].qty=parseInt(e.cart[n].qty)+parseInt(p),e.cart[n].total_per_unit=h,e.cart[n].total_per_unit_srp=m,p>l&&(e.cart[n].error=!0)}else{var x=p*s,O=p*u,g=0!==j?x-x*j:x,v=0!==j?O-O*j:O;e.cart.unshift({_id:r,item_name:c,item_price:s,item_srp:u,inventory_qty:l,error:!1,qty:p,discount:j,total_per_unit:g,total_per_unit_srp:v,item_unit:d})}},updateQty:function(e,t){var a=t.payload,n=a._id,r=a.qty,c=a.item_price,i=a.inventory_qty,s=a.item_srp,o=e.cart.findIndex((function(e){return e._id===n})),l=NaN===r?0:parseInt(r),d=l*c,u=l*s;-1!==o&&(e.cart[o].qty=l,e.cart[o].total_per_unit=0!==e.cart[o].discount?d-d*e.cart[o].discount:d,e.cart[o].total_per_unit_srp=0!==e.cart[o].discount?u-u*e.cart[o].discount:u,e.cart[o].error=l>i)},setDiscount:function(e,t){var a=t.payload,n=a._id,r=a.discount,c=a.item_price,i=a.item_srp,s=a.qty,o=e.cart.findIndex((function(e){return e._id===n})),l=r/100,d=c*s,u=i*s;-1!==o&&(e.cart[o].discount=l,e.cart[o].total_per_unit=0!==r?d-d*l:c*s,e.cart[o].total_per_unit_srp=0!==r?u-u*l:i*s)},removeItem:function(e,t){var a=t.payload,n=e.cart.findIndex((function(e){return e._id===a}));e.cart.splice(n,1)}},extraReducers:function(e){e.addCase(V.pending,(function(e){e.loading=!0})).addCase(V.fulfilled,(function(e,t){t.payload;e.loading=!1,e.cart=[]})).addCase(V.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a}))}}),Q=function(e){return e.cart},K=Object(w.c)(Q,(function(e){return e.cart})),J=Object(w.c)(Q,(function(e){return e.loading})),Y=G.actions,X=Y.addItem,Z=Y.removeItem,$=Y.updateQty,ee=Y.setDiscount,te=G.reducer,ae=a(282),ne=a(26),re=a(309);var ce=function(e){var t=e.item,a=Object(y.b)(),r=Object(n.useState)(parseInt(t.item_price)*parseInt(t.qty)),c=Object(d.a)(r,2),i=(c[0],c[1]),o=Object(n.useState)(parseInt(t.item_srp)*parseInt(t.qty)),l=Object(d.a)(o,2),j=l[0],b=l[1],f=(Object(y.c)(K),Object(s.f)());return Object(n.useEffect)((function(){i(parseInt(t.item_price)*parseInt(t.qty)),b(parseInt(t.item_srp)*parseInt(t.qty))}),[t.qty]),Object(n.useEffect)((function(){i(t.total_per_unit),b(t.total_per_unit_srp)}),[t.total_per_unit,t.total_per_unit_srp]),Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(m.a,{id:t._id,hover:!0,component:re.a.tr,title:"Name : ".concat(t.item_name,"\nQuantity : ").concat(t.qty,"\nDiscount : ").concat(100*t.discount,"%"),initial:{y:-100,opacity:0},animate:{y:0,opacity:1},onDoubleClick:function(){f.push("/add-qty?mode=update&discount=".concat(t.discount/100),t)},style:{WebkitAppRegion:"no-drag",cursor:"pointer"},children:[Object(C.jsxs)(x.a,{style:{fontSize:"10px"},colSpan:2,children:[Object(C.jsx)(p.a,{color:"grey",icon:u.b}),"\xa0\xa0",t.item_name.substring(0,30)+"..."]}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:t.qty}),Object(C.jsx)(x.a,{children:Object(C.jsx)(ne.a,{thousandSeparator:!0,displayType:"text",value:j,style:{fontSize:"10px",textAlign:"center"},decimalScale:2,decimalSeparator:".",fixedDecimalScale:!0})}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:Object(C.jsx)(ae.a,{color:"secondary",size:"small",onClick:function(){a(Z(t._id))},style:{WebkitAppRegion:"no-drag"},children:Object(C.jsx)(p.a,{icon:u.t})})})]},t._id)})};var ie=function(e){var t=Object(y.b)(),a=Object(y.c)(K),r=Object(y.c)((function(e){return e.cart})).loading,c=Object(n.useState)([]),i=Object(d.a)(c,2),o=i[0],l=i[1],_=Object(n.useState)(0),k=Object(d.a)(_,2),w=k[0],I=k[1],P=Object(n.useState)(9),R=Object(d.a)(P,2),A=R[0],W=R[1],z=Object(s.f)();return Object(n.useEffect)((function(){l(a)}),[a]),r?Object(C.jsx)(S,{}):Object(C.jsx)(j.a,{component:b.a,elevation:2,style:{minHeight:"550px",position:"relative"},children:Object(C.jsxs)(f.a,{size:"small",stickyHeader:!0,children:[Object(C.jsx)(h.a,{children:Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{colSpan:2,children:"Name"}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:"QTY"}),Object(C.jsx)(x.a,{children:"Total"}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:"Action"})]})}),Object(C.jsx)(O.a,{children:o.slice(w*A,w*A+A).map((function(e){return Object(C.jsx)(ce,{item:e})}))}),Object(C.jsxs)(m.a,{style:{position:"absolute",bottom:"0",left:"0",WebkitAppRegion:"no-drag"},children:[Object(C.jsx)(x.a,{colSpan:1,children:Object(C.jsx)(g.a,{variant:"contained",size:"small",style:{backgroundColor:"green",color:"#ffffff",WebkitAppRegion:"no-drag"},startIcon:Object(C.jsx)(p.a,{icon:u.q}),onClick:function(){if(0==o.length)return t(T({message:"Cart is Empty",severity:"error"}));var e=[];if(o.map((function(t){!0===t.error&&e.push(t.error)})),e.length>0)return t(T({message:"Invalid Quantity",severity:"error"}));z.push("/transaction",a)},children:"Checkout"})}),Object(C.jsx)(x.a,{colSpan:4,children:Object(C.jsx)(v.a,{rowsPerPageOptions:[9],count:o.length,rowsPerPage:A,page:w,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){W(+e.target.value),I(0)},labelRowsPerPage:!1})})]})]})})},se=a(11),oe=q.a.create({timeout:1e3}),le=function(e){return new Promise((function(t){return setTimeout(t,e)}))},de=Object(w.b)("products/selectAllProducts",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=16;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,l=t.opt,e.next=12,oe(Object(se.a)(Object(se.a)({baseURL:"http://".concat(s,":").concat(o,"/api/v1")},l),{},{method:"GET"}));case 12:return d=e.sent,e.next=15,le(1e3);case 15:return e.abrupt("return",d.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()),ue=Object(w.b)("products/searchProduct",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=16;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,l=t.opt,e.next=12,oe(Object(se.a)(Object(se.a)({baseURL:"http://".concat(s,":").concat(o,"/api/v1")},l),{},{method:"GET"}));case 12:return d=e.sent,e.next=15,le(1e3);case 15:return e.abrupt("return",d.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()),pe=Object(w.b)("products/selectSingleProduct",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,e.next=11,oe({baseURL:"http://".concat(s,":").concat(o,"/api/v1"),method:"GET",url:"/products/"+t});case 11:return l=e.sent,e.next=14,le(1e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),je=(Object(w.b)("products/createTransaction",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,e.next=11,oe({baseURL:"http://".concat(s,":").concat(o,"/api/v1"),method:"POST",url:"/products",data:t});case 11:return l=e.sent,e.next=14,le(1e3);case 14:return e.abrupt("return",l.data);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),Object(w.d)({selectId:function(e){return e._id},sortComparer:function(e){return e.createdAt}})),be=Object(w.e)({name:"products",initialState:je.getInitialState({loading:!1,selectedProd:[],error:null}),reducers:{clearProducts:function(e){e.entities=[]}},extraReducers:function(e){e.addCase(de.pending,(function(e){e.loading=!0})).addCase(de.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,je.setAll(e,a)})).addCase(de.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a})).addCase(ue.pending,(function(e){e.loading=!0})).addCase(ue.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,je.setAll(e,a)})).addCase(ue.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a})).addCase(pe.pending,(function(e,t){t.payload;e.loading=!0})).addCase(pe.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,je.addOne(e,a)})).addCase(pe.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a}))}}),fe=Object(w.c)((function(e){return e.products}),(function(e){return e.loading})),he=(be.actions.clearProducts,je.getSelectors((function(e){return e.products}))),me=be.reducer,xe=a(317);var Oe=function(e){var t=e.item,a=(Object(y.b)(),Object(s.f)());return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(m.a,{hover:!0,style:{cursor:"pointer",WebkitAppRegion:"no-drag"},title:"Name : ".concat(t.item_name,"\nType : ").concat(t.item_type,"\nBrand : ").concat(t.item_brand),children:[Object(C.jsxs)(x.a,{style:{fontSize:"11px"},children:[Object(C.jsx)(p.a,{color:"grey",icon:u.a}),"\xa0\xa0",t.item_name]}),Object(C.jsx)(x.a,{style:{fontSize:"11px"},children:t.item_qty}),Object(C.jsx)(x.a,{style:{fontSize:"11px"},children:Object(C.jsx)(ne.a,{displayType:"text",thousandSeparator:!0,fixedDecimalScale:!0,allowNegative:!1,decimalScale:2,decimalSeparator:".",customInput:xe.a,value:t.item_srp})}),Object(C.jsx)(x.a,{children:Object(C.jsx)(ae.a,{color:"primary",size:"small",onClick:function(){a.push("/add-qty",t)},style:{WebkitAppRegion:"no-drag"},children:Object(C.jsx)(p.a,{icon:u.m})})})]},t._id)})};var ge=function(){var e=Object(y.b)(),t=Object(y.c)(he.selectAll),a=Object(y.c)((function(e){return e.settings})).loading,r=(Object(y.c)((function(e){return e.connection})).isConnected,Object(y.c)(fe)),c=Object(n.useState)(0),i=Object(d.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)(11),u=Object(d.a)(l,2),p=u[0],g=u[1];return Object(n.useEffect)((function(){o(0)}),[t]),Object(n.useEffect)((function(){e(de({opt:{url:"/products"}}))}),[]),r||a?Object(C.jsx)(S,{}):Object(C.jsx)("div",{children:Object(C.jsx)(j.a,{component:b.a,style:{minHeight:"550px",position:"relative"},children:Object(C.jsxs)(f.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table",children:[Object(C.jsx)(h.a,{children:Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{children:"Name"}),Object(C.jsx)(x.a,{children:"QTY"}),Object(C.jsx)(x.a,{children:"Price"}),Object(C.jsx)(x.a,{children:"Action"})]})}),Object(C.jsx)(O.a,{children:t.slice(s*p,s*p+p).map((function(e){return Object(C.jsx)(Oe,{item:e})}))}),Object(C.jsx)(m.a,{style:{position:"absolute",bottom:"0",left:"0",WebkitAppRegion:"no-drag"},children:Object(C.jsx)(x.a,{colSpan:4,children:Object(C.jsx)(v.a,{rowsPerPageOptions:[11],count:t.length,rowsPerPage:p,page:s,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){g(+e.target.value),o(0)}})})})]})})})},ve={Dashboard:{height:"90%"},infoBlock:{height:"50px",borderRadius:"10px",background:"#fff"},ContentBlock:{height:"90%",borderRadius:"10px",padding:"20px"}};var ye=Object(l.a)(ve)((function(e){var t=e.classes,a=t.ContentBlock,n=t.Dashboard;return t.infoBlock,Object(s.f)(),Object(C.jsxs)(o.a,{container:!0,className:n,spacing:2,children:[Object(C.jsx)(o.a,{direction:"column",item:!0,container:!0,lg:6,sm:6,children:Object(C.jsx)(ie,{})}),Object(C.jsx)(o.a,{item:!0,lg:6,sm:6,className:a,children:Object(C.jsx)(ge,{})})]})})),_e={"@global":{body:{height:"100%",margin:"0px","& #root":{height:"100%"},overflow:"hidden",position:"relative",borderRadius:"15px"},html:{height:"95%",margin:"0px",padding:"20px"}},root:{height:"100%",background:"#EBEBF7",padding:"20px",borderRadius:"20px",position:"relative"},ContainerWrap:{height:"auto",padding:"20px 0px 0px 0px !important",position:"relative"}},ke=a(318),Ce=a(315);var Se=function(e){var t=e.handleCloseToast,a=Object(y.c)((function(e){return e.notifications})),n=a.message,r=a.severity,c=a.open;return Object(C.jsx)(ke.a,{open:c,autoHideDuration:4e3,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{bottom:"50px",right:"50px",WebkitAppRegion:"no-drag"},children:Object(C.jsx)(Ce.a,{elevation:6,variant:"filled",onClose:t,severity:r,children:n})})},we=a(157),Ie=a(250),Pe=a(155),Te=a(154),Re=a(294),Ae=a(319),We=a(291),ze=a(292),Ee=a(321),De=a(295),qe=a(313),Be=a(296),Ne={TransactionModal:{display:"flex",alignItems:"center",justifyContent:"center",WebkitAppRegion:"no-drag"},ModalContent:{borderRadius:"10px",padding:"20px",width:"400px",height:"450px",backgroundColor:"#ffffff",outline:"none",position:"relative"},SuccessPageModal:{outline:"none",height:"650px",padding:"30px"},ModalCartContent:{borderRadius:"10px",padding:"20px",width:"300px",backgroundColor:"#ffffff",outline:"none",position:"relative"},AddQTYModal:{display:"flex",justifyContent:"center",alignItems:"center",WebkitAppRegion:"no-drag"},AddDiscountModal:{display:"flex",justifyContent:"center",alignItems:"center",WebkitAppRegion:"no-drag"}},Le=q.a.create({timeout:1e3}),Me=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Ue=Object(w.b)("report/CreateTransactionReport",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=18;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,l=t.url,e.next=12,Le({baseURL:"http://".concat(s,":").concat(o,"/api/v1/gc-print"),url:l,method:"GET"});case 12:return d=e.sent,e.next=15,Me(1e3);case 15:return e.next=17,d.data;case 17:return e.abrupt("return",e.sent);case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t,a){return e.apply(this,arguments)}}()),He=a(52),Ve=a.n(He),Fe=a(84),Ge=a.n(Fe),Qe=a(103),Ke=new Intl.NumberFormat("en-PH",{style:"currency",currency:"Php"});Ve.a.fonts={Courier:{normal:"cour.ttf",bold:"courbd.ttf",italics:"couri.ttf",bolditalics:"courbi.ttf"},Times:{normal:"times.ttf",bold:"timesbd.ttf",italics:"timesi.ttf",bolditalics:"timesbi.ttf"},Arial:{normal:"arial.ttf",bold:"arialbd.ttf",italics:"ariali.ttf",bolditalics:"arialbi.ttf"},Epson:{normal:"Epson1.ttf",bold:"Epson1.ttf",italics:"Epson1.ttf",bolditalics:"Epson1.ttf"},Charlie_dotted:{normal:"charlie_dotted.ttf",bold:"charlie_dotted.ttf",italics:"charlie_dotted.ttf",bolditalics:"charlie_dotted.ttf"},DOT_MATRIX:{normal:"DOTMATRI.TTF",bold:"DOTMBold.TTF",italics:"DOTMATRI.TTF",bolditalics:"DOTMATRI.TTF"},FAKE_RECEIPT:{normal:"fake receipt.ttf",bold:"fake receipt.ttf",italics:"fake receipt.ttf",bolditalics:"fake receipt.ttf"}};var Je=function(e,t){var a,n,r,c,i,s,o,l=[];e.map((function(e){var t=e[4].discount*e[4].price;a=e[4].customer_name,r=new Date(e[4].date).toLocaleDateString(),e[4].transact_type,c=e[4].total_amount,i=e[4].change_amount,s=e[4].cash_amount,o=e[4]._id,n=e[4].customer_address,l.push(t)}));var d=l.reduce((function(e,t){return e+t}),0);return{pageSize:{width:921.5,height:533.5},pageMargins:[20,70,20,130],compress:!1,header:function(e){if(1===e)return{columns:[{image:"data:image/png;base64,".concat(t),width:50,height:50},{stack:[{text:"Smart/Tnt:0963-644-8252\nGlobe/tm:0926-775-3578",style:"subheader"}],alignment:"right"}],margin:[20,8],width:"*"}},footer:function(e,t){if(e===t)return{stack:[{table:{widths:["*",190,250],headerRows:1,body:[[{text:"Prepared by : ",style:{fontSize:15},bold:!0},{text:"Discount : ".concat(Ke.format(d)),style:{fontSize:15,font:"Times"},bold:!1},{text:"Amount to pay : ".concat(Ke.format(c)),style:{fontSize:15,font:"Times"},bold:!1}],[{text:"",border:[!1,!1,!1,!1]},{text:["Cash : ",{text:"".concat(s),style:{alignment:"center",font:"Times",fontSize:15}}],bold:!1,fontSize:15},{text:"".concat(i<=-1?"Balance : "+Ke.format(-1*i):"Change : "+Ke.format(i)),style:{font:"Times",fontSize:15},bold:!1}]]}},{text:"**** Nothing Follows ****",style:{fontSize:12},bold:!1,alignment:"center",margin:[0,7,0,0]},{text:"Received goods in order and prestine condition\n\nby:__________________________________",style:{fontSize:12},alignment:"right",bold:!1,margin:[0,3,0,0]}],margin:[20,0]}},content:[{columns:[{text:"ORDER SLIP",bold:!0,style:{fontSize:22,font:"Times"}}],alignment:"center"},{stack:[{columns:[{text:["Customer Name : ",{text:"".concat(a),italics:!1,bold:!1}],bold:!0,fontSize:15,margin:[0,5,0,0]},{text:["Transaction Date : ",{text:"".concat(r),italics:!1,bold:!1}],bold:!0,fontSize:15,margin:[0,5,0,0]}]},{columns:[{text:["Address : ",{text:"".concat(n),bold:!1}],bold:!0,fontSize:15,margin:[0,5,0,10]},{text:["Receipt# : ",{text:"".concat(o),fontSize:15,bold:!1}],bold:!0,fontSize:15,margin:[0,5,0,10]}]},{table:{dontBreakRows:!0,headerRows:1,widths:[60,60,"*",120,80],body:[[{text:"QTY",style:"tableHeader",border:[!0,!0,!0,!1]},{text:"UNIT",style:"tableHeader",border:[!0,!0,!0,!1]},{text:"ITEM NAME",style:"tableHeader",border:[!0,!0,!0,!1]},{text:"UNIT PRICE",style:"tableHeader",border:[!0,!0,!0,!1]},{text:"AMOUNT",style:"tableHeader",border:[!0,!0,!0,!1]}]]}},{layout:{hLineWidth:function(e,t){return 0===e||e===t.table.body.length?1:0},hLineHeight:function(e,t){return 1===e?0:1},paddingBottom:function(e,t,a){if(e===t.table.body.length-1&&void 0!==t.positions[t.positions.length-1]){var n=t.positions[t.positions.length-1],r=n.pageInnerHeight-n.top;return r<0?2:r}return 2}},table:{dontBreakRows:!0,headerRows:1,widths:[60,60,"*",120,80],body:Object(Qe.a)(e)}}],margin:[0,10,0,0]}],styles:{header:{fontSize:12,font:"Times",bold:!0},subheader:{fontSize:12,font:"Times",bold:!0},tableHeader:{fontSize:16,alignment:"center",margin:[0,3],bold:!0,border:[!0,!0,!0,!0]},tableItems:{alignment:"center",margin:[0,2],fontSize:13},tableItemsAmount:{alignment:"center",margin:[0,2],fontSize:13,font:"Times"}},defaultStyle:{font:"Times",columnGap:5,fontSize:12,color:[70,50,30,100]}}},Ye=a(69);var Xe=Object(l.a)(Ne)((function(e){var t=Object(y.b)(),a=Object(y.c)(J),r=Object(s.g)().state,c=Object(n.useState)(!1),i=Object(d.a)(c,2),l=i[0],j=i[1],b=Object(n.useState)(!1),f=Object(d.a)(b,2),h=f[0],m=f[1],x=Object(s.f)(),O=e.classes,v=O.TransactionModal,_=O.ModalContent,k=Object(n.useState)(0),w=Object(d.a)(k,2),I=w[0],P=w[1],R=Object(n.useState)(0),A=Object(d.a)(R,2),W=A[0],D=A[1],q=Object(n.useState)({customer_name:"",customer_address:"",transact_payment_type:"full",cash_amount:0,transact_status:!0}),B=Object(d.a)(q,2),N=B[0],L=B[1],U=function(){var e=Object(E.a)(z.a.mark((function e(a){var n,r,c,i,s,o,l,d,u,p,b,f,m;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(M({url:"/settings"}));case 3:if(n=e.sent,!M.fulfilled.match(n)){e.next=18;break}if(r=n.payload.settings,c=void 0!==r.address?r.address:"localhost",i=void 0!==r.port?r.port:8081,s=Object(Ye.io)("http://".concat(c,":").concat(i)),void 0===a.payload){e.next=17;break}return o=a.payload.transact_id,e.next=13,t(Ue({url:"/transactions/"+o}));case 13:l=e.sent,Ue.fulfilled.match(l)&&(d=l.payload,u=d.doc,p=d.logo,(b=JSON.parse(u)).length>0&&(Ve.a.vfs=Ge.a.pdfMake.vfs,f=Je(b,p),m=Ve.a.createPdf(f),h&&m.getBase64((function(e){s.emit("printcmd",{sid:s.id,data:e,id:o})})),m.getBlob((function(e){var t=window.URL.createObjectURL(e);x.push("/transaction/success?pdf="+t)})))),e.next=18;break;case 17:x.goBack();case 18:j(!1),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),t(T({message:"Transaction Failed, Pls try again.",severity:"error"}));case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){j(!0),r.map((function(e){var t=e.total_per_unit,a=e.total_per_unit_srp;P((function(e){return e+t})),D((function(e){return e+a}))}))}),[]),a?Object(C.jsx)(S,{}):Object(C.jsx)(we.a,{open:l,onClose:U,BackdropComponent:Ie.a,BackdropProps:{timeout:500,style:{borderRadius:"20px",height:"700px"}},className:v,children:Object(C.jsx)(Pe.a,{in:l,children:Object(C.jsx)("div",{className:_,children:Object(C.jsxs)(o.a,{container:!0,spacing:2,children:[Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsxs)(Te.a,{variant:"h6",children:["Total Number of Order :\xa0",Object(C.jsx)(ne.a,{displayType:"text",value:r.length,customInput:xe.a,fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.f})})}})]})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsxs)(Te.a,{variant:"h6",children:["Total Price :\xa0",Object(C.jsx)(ne.a,{displayType:"text",value:W,customInput:xe.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,decimalSeparator:".",prefix:"Php ",fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.f})})}})]})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsxs)(Te.a,{variant:"h6",children:["Cash Change :\xa0",Object(C.jsx)(ne.a,{displayType:"text",value:0==N.cash_amount?0:N.cash_amount-W,customInput:xe.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,decimalSeparator:".",fullWidth:!0,size:"small",variant:"outlined",label:"Total",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.f})})}})]})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsx)(xe.a,{fullWidth:!0,size:"small",variant:"outlined",value:N.customer_name,onChange:function(e){L((function(t){return Object(se.a)(Object(se.a)({},t),{},{customer_name:e.target.value})}))},label:"Customer Name",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.u})})}})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsx)(xe.a,{fullWidth:!0,size:"small",variant:"outlined",value:N.customer_address,onChange:function(e){L((function(t){return Object(se.a)(Object(se.a)({},t),{},{customer_address:e.target.value})}))},label:"Customer Address",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.c})})}})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsx)(ne.a,{error:"full"==N.transact_payment_type&&N.cash_amount<I||0==N.cash_amount&&"partial"==N.transact_payment_type,label:"Cash Amount",fullWidth:!0,size:"small ",variant:"outlined",customInput:xe.a,value:N.cash_amount,decimalScale:2,decimalSeparator:".",fixedDecimalScale:!0,InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.j})})},onChange:function(e){var t=e.target.value;L((function(e){return Object(se.a)(Object(se.a)({},e),{},{cash_amount:t})}))}})}),Object(C.jsx)(o.a,{item:!0,lg:6,sm:6,children:Object(C.jsxs)(xe.a,{fullWidth:!0,variant:"outlined",size:"small",select:!0,label:"Payment Type",value:N.transaction_payment_type,onChange:function(e){var t=e.target.value;L((function(e){return Object(se.a)(Object(se.a)({},e),{},{transact_payment_type:t})}))},children:[Object(C.jsx)(Ae.a,{value:"full",children:"Full Payment"}),Object(C.jsx)(Ae.a,{value:"partial",children:"Partial Payment"})]})}),Object(C.jsx)(o.a,{item:!0,lg:6,sm:6,children:Object(C.jsxs)(We.a,{size:"small",component:"fieldset",variant:"outlined",children:[Object(C.jsx)(ze.a,{component:"legend",children:"Auto Print"}),Object(C.jsxs)(Ee.a,{row:!0,onChange:function(e){m(!h)},value:h,children:[Object(C.jsx)(De.a,{value:!0,control:Object(C.jsx)(qe.a,{size:"small"}),label:"On"}),Object(C.jsx)(De.a,{value:!1,control:Object(C.jsx)(qe.a,{size:"small"}),label:"Off"})]})]})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,style:{position:"absolute",bottom:"0",left:"20"},children:Object(C.jsxs)(Be.a,{variant:"outlined",color:"primary","aria-label":"contained primary button group",children:[Object(C.jsx)(g.a,{fullWidth:!0,startIcon:Object(C.jsx)(p.a,{color:"green",icon:u.k}),onClick:Object(E.a)(z.a.mark((function e(){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=N.customer_name){e.next=2;break}return e.abrupt("return");case 2:if(0!==N.cash_amount){e.next=4;break}return e.abrupt("return");case 4:if(!("full"==N.transact_payment_type&&N.cash_amount<I)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t(V({values:r.map((function(e){return Object(se.a)(Object(se.a)({},e),{},{customer_name:N.customer_name,customer_address:N.customer_address,total_amount:I,total_amount_srp:W,cash_amount:N.cash_amount,change_amount:N.cash_amount-I,change_amount_srp:N.cash_amount-W,transact_payment_type:""===N.transact_payment_type?N.cash_amount>=I?"full":"partial":N.transact_payment_type,transact_status:"full"===N.transact_payment_type})}))}));case 8:a=e.sent,V.fulfilled.match(a)?U(a):V.rejected.match(a)&&(t(T({message:"Error : "+a.payload,severity:"error"})),U());case 10:case"end":return e.stop()}}),e)}))),children:"Process Order"}),Object(C.jsx)(g.a,{onClick:U,children:"Cancel"})]})})]})})})})})),Ze=a(68),$e=a(297),et=a(311),tt=a(298),at=a(299),nt=a(300),rt=a(301),ct=Object(w.e)({name:"connection",initialState:{isConnected:!1},reducers:{setConnection:function(e,t){var a=t.payload;e.isConnected=a}}}),it=ct.actions.setConnection,st=ct.reducer,ot=a(314),lt=a(148),dt=a.n(lt);var ut=Object(l.a)(k)((function(e){var t=window.require("electron").ipcRenderer,a=e.searchRef,r=e.classes.HeaderWrap,c=Object(y.b)(),i=Object(y.c)((function(e){return e.connection})).isConnected,l=Object(y.c)(he.selectAll),j=Object(y.c)((function(e){return e.settings})).loading,f=Object(s.f)(),h=Object(n.useState)(""),m=Object(d.a)(h,2),x=m[0],O=m[1],v=function(e){O(e.target.value)},_=function(){var e=Object(E.a)(z.a.mark((function e(t){var a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=dt()(x),console.log(a),"Enter"!==t.key){e.next=7;break}return e.next=5,c(ue({opt:{url:"/search/products?query="+a}}));case 5:n=e.sent,ue.fulfilled.match(n)&&O("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(E.a)(z.a.mark((function e(){var t,a,n,r,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(M({url:"/settings"}));case 3:t=e.sent,M.fulfilled.match(t)&&(a=t.payload.settings,n=void 0!==a.address?a.address:"localhost",r=void 0!==a.port?a.port:8081,(i=Object(Ye.io)("http://".concat(n,":").concat(r))).on("connect",(function(){c(it(i.connected)),c(de({opt:{url:"/products"}}))})),i.on("disconnect",(function(){c(it(i.connected)),c(de({opt:{url:"/products"}}))})),i.on("server-printer",(function(e){console.log(e)})),i.on("created_product",(function(){c(de({opt:{url:"/products"}}))})),i.on("updated_product",(function(){c(de({opt:{url:"/products"}}))})),i.on("deleted_product",(function(){c(de({opt:{url:"/products"}}))})),i.on("print-status",(function(e){console.log(e)}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c(T({message:"Settings not loaded.",severity:"error"}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){k()}),[]),j?Object(C.jsx)(S,{}):Object(C.jsxs)(o.a,{item:!0,container:!0,lg:12,sm:12,className:r,component:b.a,elevation:2,style:{display:"flex !important",flexDirection:"row",justifyContent:"space-between",WebkitAppRegion:"no-drag"},children:[Object(C.jsxs)(et.a,{style:{WebkitAppRegion:"no-drag",height:"40px",alignSelf:"center",display:"flex"},children:[Object(C.jsx)(ot.a,{style:{width:"350px"},options:Object(Qe.a)(new Set(l.map((function(e){return void 0!==e.item_name&&e.item_name})))),PopperComponent:function(e){return Object(C.jsx)($e.a,Object(se.a)(Object(se.a)({},e),{},{style:Object(Ze.a)({left:5,WebkitAppRegion:"no-drag"},"left",0)}))},inputValue:x,onChange:function(e,t){return O(t)},size:"small",renderInput:function(e){return Object(C.jsx)(xe.a,Object(se.a)({fullWidth:!0,variant:"outlined",label:"Search Product",inputRef:a,value:x,InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.p})})},onChange:v,onKeyPress:_},e))}}),Object(C.jsx)(tt.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(C.jsx)(et.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center"},children:Object(C.jsx)(ae.a,{size:"small",onClick:function(){c(de({opt:{url:"/products"}}))},children:Object(C.jsx)(p.a,{color:"blue",icon:u.r})})}),Object(C.jsx)(tt.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(C.jsx)(et.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center",justifySelf:"flex-end"},children:Object(C.jsx)(g.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(p.a,{icon:u.i}),size:"small",onClick:function(){f.push("/translist")},children:"Transactions"})}),Object(C.jsx)(tt.a,{style:{margin:"0px 10px"},variant:"fullWidth",orientation:"vertical",flexItem:!0}),Object(C.jsxs)(et.a,{style:{WebkitAppRegion:"no-drag",height:"40px",display:"flex",alignItems:"center",justifySelf:"flex-end"},children:[Object(C.jsx)(at.a,{fontSize:"small",htmlColor:i?"green":"maroon"}),Object(C.jsxs)(Te.a,{variant:"caption",children:["\xa0",i?"Connected to Server":"Disconnected"]})]})]}),Object(C.jsxs)(et.a,{style:{WebkitAppRegion:"no-drag",alignSelf:"center"},children:[Object(C.jsx)(ae.a,{size:"small",component:re.a.div,whileHover:{scale:1.1},onClick:function(){f.push("/settings")},children:Object(C.jsx)(p.a,{icon:u.e})}),Object(C.jsx)(ae.a,{size:"small",component:re.a.div,whileHover:{scale:1.1},onClick:function(){t.invoke("min")},children:Object(C.jsx)(nt.a,{color:"primary"})}),Object(C.jsx)(ae.a,{size:"small",component:re.a.div,whileHover:{scale:1.1},onClick:function(){t.invoke("close")},children:Object(C.jsx)(rt.a,{color:"secondary"})}),"\xa0\xa0"]})]})})),pt=a(302),jt=a(303),bt=a(304),ft=a(305),ht=a(287),mt=a(29),xt=a(310),Ot=a(151),gt=q.a.create({timeout:1e3}),vt=function(e){return new Promise((function(t){return setTimeout(t,e)}))},yt=Object(w.b)("transactions/getAllTransaction",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,c=t.opt,e.prev=2,e.next=5,r(M({url:"/settings"}));case 5:if(i=e.sent,!M.fulfilled.match(i)){e.next=16;break}return s=i.payload.settings,o=void 0!==s.address?s.address:"localhost",l=void 0!==s.port?s.port:8081,e.next=12,gt(Object(se.a)(Object(se.a)({},c),{},{baseURL:"http://".concat(o,":").concat(l,"/api/v1"),method:"GET"}));case 12:return d=e.sent,e.next=15,vt(1e3);case 15:return e.abrupt("return",d.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(2),e.abrupt("return",n(e.t0));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,a){return e.apply(this,arguments)}}()),_t=(Object(w.b)("transactions/getSingleTransaction",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,c=t.opt,e.prev=2,e.next=5,r(M({url:"/settings"}));case 5:if(i=e.sent,!M.fulfilled.match(i)){e.next=16;break}return s=i.payload.settings,o=void 0!==s.address?s.address:"localhost",l=void 0!==s.port?s.port:8081,e.next=12,gt(Object(se.a)(Object(se.a)({},c),{},{baseURL:"http://".concat(o,":").concat(l,"/api/v1"),method:"GET"}));case 12:return d=e.sent,e.next=15,vt(1e3);case 15:return e.abrupt("return",d.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(2),e.abrupt("return",n(e.t0));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,a){return e.apply(this,arguments)}}()),Object(w.b)("transactions/createTransaction",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d,u;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,c=t.opt,i=t.values,e.prev=2,e.next=5,r(M({url:"/settings"}));case 5:if(s=e.sent,!M.fulfilled.match(s)){e.next=16;break}return o=s.payload.settings,l=void 0!==o.address?o.address:"localhost",d=void 0!==o.port?o.port:8081,e.next=12,gt(Object(se.a)(Object(se.a)({},c),{},{baseURL:"http://".concat(l,":").concat(d,"/api/v1"),method:"POST",data:i}));case 12:return u=e.sent,e.next=15,vt(1e3);case 15:return e.abrupt("return",u.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(2),e.abrupt("return",n(e.t0));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,a){return e.apply(this,arguments)}}())),kt=Object(w.b)("transactions/findTransaction",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=16;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,l=t.opt,e.next=12,gt(Object(se.a)(Object(se.a)({},l),{},{baseURL:"http://".concat(s,":").concat(o,"/api/v1"),method:"GET"}));case 12:return d=e.sent,e.next=15,vt(1e3);case 15:return e.abrupt("return",d.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()),Ct=Object(w.b)("transactions/getDocDef",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d,u;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=15;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,l=t.opt,e.next=12,gt(Object(se.a)(Object(se.a)({},l),{},{baseURL:"http://".concat(s,":").concat(o,"/api/v1"),method:"GET",responseType:"blob",headers:{Accept:"application/pdf","Content-Type":"application/pdf",mode:"no-cors"}}));case 12:return d=e.sent,u=window.URL.createObjectURL(d.data),e.abrupt("return",u);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()),St=Object(w.b)("transactions/updateTransaction",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d,u;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=16;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,l=t.opt,d=t.value,e.next=12,gt(Object(se.a)(Object(se.a)({},l),{},{baseURL:"http://".concat(s,":").concat(o,"/api/v1"),method:"PATCH",data:d}));case 12:return u=e.sent,e.next=15,vt(1e3);case 15:return e.abrupt("return",u.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()),wt=Object(w.b)("transactions/deleteTransaction",function(){var e=Object(E.a)(z.a.mark((function e(t,a){var n,r,c,i,s,o,l,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,r=a.dispatch,e.prev=1,e.next=4,r(M({url:"/settings"}));case 4:if(c=e.sent,!M.fulfilled.match(c)){e.next=16;break}return i=c.payload.settings,s=void 0!==i.address?i.address:"localhost",o=void 0!==i.port?i.port:8081,l=t.opt,e.next=12,gt(Object(se.a)(Object(se.a)({},l),{},{baseURL:"http://".concat(s,":").concat(o,"/api/v1"),method:"DELETE"}));case 12:return d=e.sent,e.next=15,vt(1e3);case 15:return e.abrupt("return",d.data);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()),It=Object(pt.a)((function(e){return{Modal:{display:"flex",alignItems:"center",justifyContent:"center"},ModalContent:{width:"450px",height:"auto",borderRadius:"5px",background:"#ffffff",outline:"none",padding:"25px"}}})),Pt=function(e){var t=e.data,a=e.fn,r=Object(y.b)(),c=Object(y.c)((function(e){return e.report})).loading,i=Object(n.useState)({partial_payments:0}),l=Object(d.a)(i,2),j=l[0],b=l[1],f=Object(s.f)();return c?Object(C.jsx)(S,{}):Object(C.jsxs)(o.a,{item:!0,container:!0,lg:12,sm:12,spacing:2,children:["partial"===t.payment_type?Object(C.jsx)(o.a,{item:!0,lg:4,sm:4,children:Object(C.jsx)(ne.a,{customInput:xe.a,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,size:"small",fullWidth:!0,label:"Amount",margin:"dense",variant:"outlined",onChange:function(e){b((function(t){return Object(se.a)(Object(se.a)({},t),{},{partial_payments:parseInt(e.target.value)})}))},InputProps:{style:{color:"partial"==t.payment_type?"maroon":"green"},startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.l})})}})}):Object(C.jsx)("div",{}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(C.jsxs)(Be.a,{variant:"contained",children:["partial"===t.payment_type?Object(C.jsx)(g.a,{size:"small",color:"secondary",style:{background:"green"},onClick:Object(E.a)(z.a.mark((function e(){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(St({opt:{url:"/transactions/"+t._id},value:j}));case 2:a=e.sent,St.fulfilled.match(a)?r(T({message:"Transaction Updated",severity:"success"})):r(T({message:"Transaction Update Failed",severity:"error"}));case 4:case"end":return e.stop()}}),e)}))),startIcon:Object(C.jsx)(p.a,{icon:Object(C.jsx)(rt.a,{})}),children:"Pay"}):Object(C.jsx)(g.a,{size:"small",disabled:!0,children:"Paid"}),Object(C.jsx)(g.a,{size:"small",style:{background:"green",color:"white"},onClick:Object(E.a)(z.a.mark((function e(){var a,n,c,i,s,o,l,d,u,p;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(M({url:"/settings"}));case 3:if(a=e.sent,!M.fulfilled.match(a)){e.next=13;break}return n=a.payload.settings,c=void 0!==n.address?n.address:"localhost",i=void 0!==n.port?n.port:8081,Object(Ye.io)("http://".concat(c,":").concat(i)),e.next=11,r(Ue({url:"/transactions/"+t._id}));case 11:s=e.sent,Ue.fulfilled.match(s)&&(o=s.payload,l=o.doc,d=o.logo,(u=JSON.parse(l)).length>0&&(Ve.a.vfs=Ge.a.pdfMake.vfs,p=Je(u,d),Ve.a.createPdf(p).getBlob((function(e){var t=window.URL.createObjectURL(e);f.push("/transaction/success?pdf="+t+"&page=transaction")}))));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r(T({message:"Cannot Print Transaction, please try again.",severity:"error"}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),startIcon:Object(C.jsx)(p.a,{icon:u.g}),children:"View"}),Object(C.jsx)(g.a,{size:"small",color:"primary",onClick:Object(E.a)(z.a.mark((function e(){var a,n,c,i,s,o,l,d,u,p,j,b;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(M({url:"/settings"}));case 3:if(a=e.sent,!M.fulfilled.match(a)){e.next=13;break}return n=a.payload.settings,c=void 0!==n.address?n.address:"localhost",i=void 0!==n.port?n.port:8081,s=Object(Ye.io)("http://".concat(c,":").concat(i)),e.next=11,r(Ue({url:"/transactions/"+t._id}));case 11:o=e.sent,Ue.fulfilled.match(o)&&(l=o.payload,d=l.doc,u=l.logo,(p=JSON.parse(d)).length>0&&(Ve.a.vfs=Ge.a.pdfMake.vfs,j=Je(p,u),(b=Ve.a.createPdf(j)).getBase64((function(e){s.emit("printcmd",{sid:s.id,data:e,id:t._id})})),b.getBlob((function(e){var t=window.URL.createObjectURL(e);f.push("/transaction/success?pdf="+t+"&page=transaction")}))));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r(T({message:"Cannot Print Transaction, please try again.",severity:"error"}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),startIcon:Object(C.jsx)(p.a,{icon:u.n}),children:"Print"}),Object(C.jsx)(g.a,{size:"small",color:"secondary",onClick:function(){f.push("/transaction/delete/"+t._id)},startIcon:Object(C.jsx)(p.a,{icon:Object(C.jsx)(rt.a,{})}),children:"Delete"}),Object(C.jsx)(g.a,{size:"small",style:{background:"orange",color:"white"},onClick:a,startIcon:Object(C.jsx)(p.a,{icon:Object(C.jsx)(rt.a,{})}),children:"Cancel"})]})})]})};var Tt=function(e){var t=e.inOpen,a=e.onClose,n=e.data,r=Object(y.c)((function(e){return e.transactions})).loading,c=It();return r?Object(C.jsx)(S,{}):Object(C.jsx)(we.a,{open:t,onClose:a,BackdropComponent:Ie.a,BackdropProps:{timeout:500,style:{height:"700px",borderRadius:"15px"}},className:c.Modal,children:Object(C.jsx)(Pe.a,{in:t,children:Object(C.jsx)("div",{className:c.ModalContent,children:Object(C.jsxs)(o.a,{container:!0,spacing:2,children:[Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsx)(xe.a,{size:"small",fullWidth:!0,disabled:!0,label:"Receipt No",value:n._id,variant:"outlined",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.h})})}})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsx)(xe.a,{size:"small",fullWidth:!0,disabled:!0,label:"Customer",value:n.customer_name,variant:"outlined",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.u})})}})}),Object(C.jsx)(o.a,{item:!0,lg:4,sm:4,children:Object(C.jsx)(xe.a,{size:"small",fullWidth:!0,label:"Item in cart",value:n.cart_count,variant:"outlined",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.b})})}})}),Object(C.jsx)(o.a,{item:!0,lg:8,sm:8,children:Object(C.jsx)(xe.a,{size:"small",disabled:"full"===n.payment_type,fullWidth:!0,label:"Transaction Date",value:new Date(n.transaction_date).toISOString().split("T")[0],variant:"outlined",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.d})})}})}),Object(C.jsx)(o.a,{item:!0,lg:5,sm:5,children:Object(C.jsx)(xe.a,{size:"small",fullWidth:!0,label:"Payment Type",value:n.payment_type,variant:"outlined",InputProps:{style:{color:"partial"==n.payment_type?"maroon":"green"},startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.l})})}})}),Object(C.jsx)(o.a,{item:!0,lg:7,sm:7,children:Object(C.jsx)(ne.a,{customInput:xe.a,fixedDecimalScale:!0,disabled:"full"===n.payment_type,decimalScale:2,thousandSeparator:!0,allowNegative:!1,prefix:"Php ",size:"small",fullWidth:!0,label:"partial"==n.payment_type?"Remaining Balance":"Change Amount",value:n.change_amount_srp,variant:"outlined",InputProps:{style:{color:"partial"==n.payment_type?"maroon":"green"},startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.l})})}})}),Object(C.jsx)(Pt,{fn:a,data:n})]})})})})};var Rt=function(e){var t,a=e.transaction,r=Object(n.useState)(!1),c=Object(d.a)(r,2),i=c[0],o=c[1],l=Object(s.f)();return Object(C.jsxs)(m.a,{hover:!0,onDoubleClick:function(){o(!0)},style:{background:"partial"==a.payment_type?"#fafafa":"",cursor:"pointer",userSelect:"none"},children:[Object(C.jsx)(x.a,{children:a.customer_name}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:a.cart_count}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:a.transaction_date.split("T")[0]}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:a.payment_type}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:Object(C.jsx)(ne.a,{displayType:"text",value:a.cash_amount,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,prefix:"Php "})}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:Object(C.jsx)(ne.a,{displayType:"text",value:a.total_price_srp,fixedDecimalScale:!0,decimalScale:2,thousandSeparator:!0,prefix:"Php "})}),Object(C.jsx)(x.a,{style:{textAlign:"center"},children:Object(C.jsx)(ne.a,(t={displayType:"text",value:a.change_amount_srp,thousandSeparator:!0,allowNegative:!1,fixedDecimalScale:!0,decimalScale:2},Object(Ze.a)(t,"thousandSeparator",!0),Object(Ze.a)(t,"prefix","Php "),t))}),Object(C.jsx)(Tt,{data:a,inOpen:i,onClose:function(){l.goBack(),o(!1)}})]},a._id)},At=Object(pt.a)((function(e){return{appBar:{position:"relative",background:"#ffffff"}}})),Wt=Object(n.forwardRef)((function(e,t){return Object(C.jsx)(jt.a,Object(se.a)({direction:"up",ref:t},e))}));var zt=function(e){var t=At(),a=Object(s.f)(),r=Object(y.b)(),c=Object(y.c)((function(e){return e.transactions})).entities,i=Object(y.c)((function(e){return e.transactions})).loading,l=Object(n.useState)(!1),g=Object(d.a)(l,2),_=g[0],k=g[1],w=Object(n.useState)(0),I=Object(d.a)(w,2),P=I[0],T=I[1],R=Object(n.useState)(8),A=Object(d.a)(R,2),W=A[0],z=A[1],E=Object(n.useState)(""),D=Object(d.a)(E,2),q=D[0],B=D[1],N=function(){k(!1),a.goBack()};Object(n.useEffect)((function(){k(!0),r(yt({opt:{url:"/transactions"}}))}),[]);var L=Object(n.useState)(new Date(Date.now()).toLocaleDateString()),M=Object(d.a)(L,2),U=M[0],H=M[1];return i?Object(C.jsx)(S,{}):Object(C.jsx)(mt.a,{utils:Ot.a,children:Object(C.jsxs)(bt.a,{fullScreen:!0,open:_,onClose:N,TransitionComponent:Wt,BackdropProps:{style:{height:"700px",borderRadius:"15px"}},style:{WebkitAppRegion:"no-drag",padding:"20px",height:"660px",borderRadius:"10px"},children:[Object(C.jsx)(ft.a,{className:t.appBar,children:Object(C.jsxs)(ht.a,{style:{justifyContent:"space-between"},children:[Object(C.jsx)(xe.a,{size:"small",variant:"outlined",label:"Search",InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(p.a,{icon:u.p})})},style:{flexBasis:"220px",flex:2,marginRight:"10px"},onKeyDown:function(e){B(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&r(kt({opt:{url:"/search/transactions?s=".concat(q)}}))}}),Object(C.jsx)(xt.a,{disableToolbar:!0,variant:"inline",format:"yyyy-dd-MM",size:"small",margin:"dense",id:"date-picker-inline",label:"Filter Date",value:U,onChange:function(e){H(new Date(e));var t=new Date(e);r(kt({opt:{url:"/search/transactions?date=".concat(t)}}))},KeyboardButtonProps:{"aria-label":"change date"},style:{alignSelf:"flex-start",flex:1}}),Object(C.jsx)(ae.a,{focusRipple:!1,style:{margin:"0px 8px"},size:"small",onClick:N,children:Object(C.jsx)(rt.a,{color:"secondary"})})]})}),Object(C.jsx)(o.a,{container:!0,children:Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,style:{padding:"30px"},children:Object(C.jsx)(j.a,{component:b.a,elevation:2,style:{minHeight:"500px",position:"relative"},children:Object(C.jsxs)(f.a,{stickyHeader:!0,size:"medium",children:[Object(C.jsx)(h.a,{children:Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{style:{fontWeight:600},children:"Customer Name"}),Object(C.jsx)(x.a,{style:{fontWeight:600,textAlign:"center"},children:"In cart"}),Object(C.jsx)(x.a,{style:{fontWeight:600,textAlign:"center"},children:"Transaction date"}),Object(C.jsx)(x.a,{style:{fontWeight:600,textAlign:"center"},children:"Payment Type"}),Object(C.jsx)(x.a,{style:{fontWeight:600,textAlign:"center"},children:"Cash Amount"}),Object(C.jsx)(x.a,{style:{fontWeight:600,textAlign:"center"},children:"Total"}),Object(C.jsx)(x.a,{style:{fontWeight:600,textAlign:"center"},children:"Change"})]})}),Object(C.jsxs)(O.a,{children:[c.slice(P*W,P*W+W).map((function(e){return Object(C.jsx)(Rt,{transaction:e})})),Object(C.jsx)(m.a,{style:{position:"absolute",bottom:0,right:0},children:Object(C.jsx)(v.a,{rowsPerPageOptions:[8,16,800],count:c.length,rowsPerPage:W,page:P,onChangePage:function(e,t){T(t)},onChangeRowsPerPage:function(e){z(+e.target.value),T(0)},labelRowsPerPage:!1})})]})]})})})})]})})},Et=a(306),Dt=a(244);var qt=Object(Dt.a)(Ne)((function(e){var t=Object(s.f)(),a=Object(n.useState)(!1),r=Object(d.a)(a,2),c=r[0],i=r[1],o=Object(y.c)((function(e){return e.transactions})).loading,l=Object(y.c)((function(e){return e.report})).loading,u=new URLSearchParams(Object(s.g)().search),p=u.get("pdf"),j=u.get("page"),b=e.classes,f=function(){"transaction"===j?t.goBack():t.push("/"),i(!1)};return Object(n.useEffect)((function(){i(!0)}),[]),o||l?Object(C.jsx)(S,{}):Object(C.jsx)(we.a,{open:c,onClose:f,BackdropComponent:Ie.a,BackdropProps:{timeout:500,style:{height:"700px",borderRadius:"15px"}},children:Object(C.jsx)(Pe.a,{in:c,children:Object(C.jsxs)("div",{className:b.SuccessPageModal,children:[Object(C.jsx)(Et.a,{size:"small",variant:"circular",onClick:f,style:{position:"absolute",left:15,top:8,WebkitAppRegion:"no-drag"},children:Object(C.jsx)(rt.a,{})}),Object(C.jsx)("iframe",{style:{border:"none",WebkitAppRegion:"no-drag"},onClick:f,src:p+"#toolbar=1",width:"100%",height:"100%"})]})})})})),Bt=a(307),Nt=a(308),Lt={SettingsModal:{WebkitAppRegion:"no-drag",display:"flex",justifyContent:"center",alignItems:"center",outline:"none",borderRadius:"15px"},SettingsContent:{backgroundColor:"#ffffff",width:"450px",height:"auto",outline:"none",padding:"20px"}};var Mt=Object(l.a)(Lt)((function(e){var t=window.require("electron").ipcRenderer,a=Object(n.useState)(!1),r=Object(d.a)(a,2),c=r[0],i=r[1],l=Object(y.b)(),j=Object(y.c)((function(e){return e.settings})).loading,b=Object(y.c)((function(e){return e.settings.entities})).settings,f=Object(n.useState)(b.address),h=Object(d.a)(f,2),m=h[0],x=h[1],O=Object(n.useState)(b.port),v=Object(d.a)(O,2),_=v[0],k=v[1],w=Object(s.f)(),I=e.classes;return Object(n.useEffect)((function(){i(!0)}),[]),j?Object(C.jsx)(S,{}):Object(C.jsx)(we.a,{open:c,onClose:function(){w.goBack(),i(!1)},BackdropComponent:Ie.a,BackdropProps:{style:{height:"700px",borderRadius:"15px"}},className:I.SettingsModal,children:Object(C.jsx)(Pe.a,{in:c,children:Object(C.jsx)("div",{className:I.SettingsContent,children:Object(C.jsxs)(o.a,{container:!0,spacing:2,children:[Object(C.jsx)(o.a,{item:!0,lg:8,sm:8,children:Object(C.jsx)(xe.a,{value:m,variant:"outlined",margin:"dense",fullWidth:!0,label:"Host Address",placeholder:"0.0.0.0",onChange:function(e){x(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(Bt.a,{})})}})}),Object(C.jsx)(o.a,{item:!0,lg:4,sm:4,children:Object(C.jsx)(xe.a,{variant:"outlined",margin:"dense",fullWidth:!0,label:"Port",value:_,onChange:function(e){k(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Re.a,{position:"start",children:Object(C.jsx)(Nt.a,{})})}})}),Object(C.jsx)(o.a,{item:!0,lg:6,sm:6,children:Object(C.jsx)(g.a,{color:"primary",fullWidth:!0,variant:"contained",size:"medium",startIcon:Object(C.jsx)(p.a,{icon:u.e}),onClick:function(){var e=Object(E.a)(z.a.mark((function e(a){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(L({url:"/settings",data:{address:m,port:parseInt(_)}}));case 2:n=e.sent,L.fulfilled.match(n)?(l(T({message:"Settings has been saved.",severity:"success"})),w.push("/"),t.invoke("restart")):l(T({message:"Please run application as `Administrator`\nSettings not save.",severity:"error"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Save"})})]})})})})})),Ut={Modal:{display:"flex",justifyContent:"center",alignItems:"center",outline:"none"},ModalContent:{background:"#ffffff",height:"auto",width:"350px",outline:"none",padding:"30px"}};var Ht=Object(l.a)(Ut)((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(s.f)(),l=Object(s.h)().id,j=e.classes,b=Object(y.b)(),f=Object(y.c)((function(e){return e.transactions})).loading,h=function(){i.goBack(),c(!1)};return Object(n.useEffect)((function(){c(!0)}),[]),f?Object(C.jsx)(S,{}):Object(C.jsx)(we.a,{open:r,onClose:h,BackdropComponent:Ie.a,BackdropProps:{timeout:500,style:{WebkitAppRegion:"no-drag",height:"700px",borderRadius:"15px"}},className:j.Modal,children:Object(C.jsx)(Pe.a,{in:r,children:Object(C.jsxs)(o.a,{container:!0,className:j.ModalContent,spacing:2,children:[Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsx)("h4",{style:{textAlign:"center"},children:"Delete transaction entry?"})}),Object(C.jsx)(o.a,{item:!0,lg:6,sm:6,children:Object(C.jsx)(g.a,{fullWidth:!0,size:"small",variant:"contained",color:"secondary",startIcon:Object(C.jsx)(p.a,{icon:u.s}),onClick:Object(E.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(wt({opt:{url:"/transactions/"+l}}));case 2:t=e.sent,wt.fulfilled.match(t)?(b(T({message:"Transaction has been deleted.",severity:"success"})),h()):b(T({message:"Error deleting transaction.",severity:"error"}));case 4:case"end":return e.stop()}}),e)}))),children:"Delete"})}),Object(C.jsx)(o.a,{item:!0,lg:6,sm:6,children:Object(C.jsx)(g.a,{fullWidth:!0,size:"small",variant:"contained",color:"primary",onClick:h,children:"Cancel"})})]})})})}));var Vt=Object(l.a)(Ne)((function(e){var t=Object(n.useState)(1),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!1),l=Object(d.a)(i,2),j=l[0],b=l[1],f=Object(n.useState)(0),h=Object(d.a)(f,2),m=h[0],x=h[1],O=Object(n.useState)(!1),v=Object(d.a)(O,2),_=v[0],k=v[1],S=Object(y.c)(K),w=Object(s.f)(),I=Object(s.g)(),P=new URLSearchParams(Object(s.g)().search).get("mode"),T=Object(y.b)(),R=e.classes,A=R.AddQTYModal,W=R.ModalCartContent,z=I.state,E=function(){var e=S.filter((function(e){return e.item_name===z.item_name}));return void 0!==e[0]?parseInt(e[0].qty):[]},D=E()>=z.item_qty||"update"===P&&parseInt(r)>parseInt(z.inventory_qty)?"Inventory is empty":"Current quantity in inventory is : "+("update"===P?z.inventory_qty:z.item_qty),q=function(){w.goBack(),b(!1)},B=Object(n.useCallback)((function(e){var t=document.getElementById("saveBtn");"Enter"!=e.key&&"Enter"!=e.code||t.click()}),[]);return Object(n.useEffect)((function(){return document.addEventListener("keypress",B),function(){document.removeEventListener("keypress",B)}}),[B]),Object(n.useEffect)((function(){z.item_qty-(E()+parseInt(r))<0?k(!0):k(!1)}),[z.item_qty,r]),Object(n.useEffect)((function(){"update"===P&&(c(z.qty),x(100*z.discount)),b(!0)}),[]),Object(C.jsx)(we.a,{open:j,onClose:q,BackdropComponent:Ie.a,BackdropProps:{timeout:500},closeAfterTransition:!0,className:A,children:Object(C.jsx)(Pe.a,{in:j,children:Object(C.jsxs)(o.a,{container:!0,className:W,spacing:2,id:"qty-modal",children:[Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsx)(ne.a,{customInput:xe.a,fullWidth:!0,disabled:z.error,variant:"outlined",label:"Discount",size:"small",margin:"none",value:parseInt(m),inputProps:{style:{textAlign:"center"}},onChange:function(e){""===e.target.value?x(0):x(e.target.value)},style:{WebkitAppRegion:"no-drag"}})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsx)(ne.a,{customInput:xe.a,autoFocus:!0,error:!!(_||E()>=z.item_qty||"update"===P&&r>parseInt(z.inventory_qty)),helperText:D,fullWidth:!0,label:"Quantity",value:parseInt(r),onChange:function(e){""===e.target.value?c(1):c(e.target.value)},variant:"outlined",size:"small",inputProps:{style:{textAlign:"center"}}})}),Object(C.jsx)(o.a,{item:!0,lg:12,sm:12,children:Object(C.jsxs)(Be.a,{children:[Object(C.jsx)(g.a,{id:"saveBtn",variant:"contained",size:"small",fullWidth:!0,startIcon:Object(C.jsx)(p.a,{icon:u.o}),color:"primary",onClick:function(e){e.preventDefault(),function(){var e=""===r?0:parseInt(r);_||e>z.item_qty||"update"===P&&e>parseInt(z.inventory_qty)||E()>=z.item_qty||(null===P?T(X(Object(se.a)(Object(se.a)({},z),{},{inventory_qty:z.item_qty,item_qty:e,discount:parseInt(m)}))):(z.discount!==parseInt(m)&&T(ee(Object(se.a)(Object(se.a)({},z),{},{discount:parseInt(m)}))),z.qty!==r&&T($(Object(se.a)(Object(se.a)({},z),{},{qty:e})))),q())}()},children:"update"===P?"Update":"Save"}),Object(C.jsx)(g.a,{variant:"contained",size:"small",fullWidth:!0,color:"secondary",onClick:function(){q()},children:"Cancel"})]})})]})})})}));var Ft=Object(l.a)(_e)((function(e){var t=Object(y.b)(),a=e.classes,r=a.root,c=a.ContainerWrap,l=Object(n.useRef)(null),d=function(){l.current.focus()};return Object(n.useEffect)((function(){return document.addEventListener("keydown",(function(e){e.ctrlKey&&"f"==e.key&&d()})),function(){document.removeEventListener("keydown",(function(e){e.ctrlKey&&"f"==e.key&&d()}))}}),[]),Object(C.jsx)(i.a,{children:Object(C.jsxs)(o.a,{style:{WebkitAppRegion:"drag"},container:!0,dicrection:"column",className:r,spacing:3,children:[Object(C.jsx)(ut,{searchRef:l}),Object(C.jsxs)(o.a,{item:!0,lg:12,sm:12,className:c,children:[Object(C.jsxs)(s.c,{children:[Object(C.jsx)(s.a,{exact:!0,path:"/",children:Object(C.jsx)(ye,{})}),Object(C.jsx)(s.a,{exact:!0,path:"/products",children:Object(C.jsx)(ge,{})}),Object(C.jsx)(s.a,{exact:!0,path:"/add-qty",children:Object(C.jsx)(Vt,{})}),Object(C.jsx)(s.a,{exact:!0,path:"/transaction",children:Object(C.jsx)(Xe,{})}),Object(C.jsx)(s.a,{exact:!0,path:"/transaction/success",children:Object(C.jsx)(qt,{})}),Object(C.jsx)(s.a,{exact:!0,path:"/translist",children:Object(C.jsx)(zt,{})}),Object(C.jsx)(s.a,{exact:!0,path:"/transaction/delete/:id",children:Object(C.jsx)(Ht,{})}),Object(C.jsx)(s.a,{exact:!0,path:"/settings",children:Object(C.jsx)(Mt,{})})]}),Object(C.jsx)(Se,{handleCloseToast:function(){t(R())}})]})]})})})),Gt=Object(w.e)({name:"transactions",initialState:{entities:[],pdf:[],loading:!1,errors:null},reducers:{},extraReducers:function(e){e.addCase(yt.pending,(function(e){e.loading=!0})).addCase(yt.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(yt.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(kt.pending,(function(e){e.loading=!0})).addCase(kt.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(kt.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(Ct.pending,(function(e){e.loading=!0})).addCase(Ct.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.pdf=a})).addCase(Ct.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(_t.pending,(function(e){e.loading=!0})).addCase(_t.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities[a._id]=a})).addCase(_t.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(St.pending,(function(e){e.loading=!0})).addCase(St.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(St.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a})).addCase(wt.pending,(function(e){e.loading=!0})).addCase(wt.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(wt.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.errors=a}))}}).reducer,Qt=Object(w.e)({name:"report",initialState:{doc:"",loading:!1,error:""},reducers:{},extraReducers:function(e){e.addCase(Ue.pending,(function(e){e.loading=!0})).addCase(Ue.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.doc=a})).addCase(Ue.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a}))}}).reducer,Kt=Object(w.e)({name:"settings",initialState:{entities:[],loading:!0,error:""},reducers:{},extraReducers:function(e){e.addCase(L.pending,(function(e){e.loading=!0})).addCase(L.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(L.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a})).addCase(M.pending,(function(e){e.loading=!0})).addCase(M.fulfilled,(function(e,t){var a=t.payload;e.loading=!1,e.entities=a})).addCase(M.rejected,(function(e,t){var a=t.payload;e.loading=!1,e.error=a}))}}).reducer,Jt=Object(w.a)({reducer:{settings:Kt,products:me,cart:te,notifications:A,transactions:Gt,connection:st,report:Qt}});c.a.render(Object(C.jsx)(y.a,{store:Jt,children:Object(C.jsx)(Ft,{})}),document.getElementById("root"))}},[[242,1,2]]]);
//# sourceMappingURL=main.7172d061.chunk.js.map